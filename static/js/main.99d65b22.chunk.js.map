{"version":3,"sources":["components/PageFooterComponent.tsx","store/preferences/actions.ts","store/root-selectors.tsx","store/preferences/selectors.ts","store/schedule/selectors.ts","components/settings/GroupFiltersComponent.tsx","components/settings/SettingsDialogComponent.tsx","store/classes/actions.ts","utils/time-utils.ts","components/PageHeaderComponent.tsx","store/schedule/actions.ts","utils/math-utils.ts","utils/string-uitls.ts","components/mainPage/timetable/hourTimetable/HourDialogComponent.tsx","components/mainPage/timetable/hourTimetable/LessonComponent.tsx","components/mainPage/timetable/dayTimetable/DayTimetableComponent.tsx","components/mainPage/timetable/timetableHeader/HeaderSlotComponent.tsx","components/mainPage/timetable/timetableHeader/TimetableHeaderComponent.tsx","store/date/actions.ts","store/substitutions/actions.ts","components/mainPage/navbar/Navbar.tsx","components/mainPage/timetable/TimetableComponent.tsx","components/mainPage/substitutions/SingleDaySubstitutionComponent.tsx","components/mainPage/substitutions/SubstitutionsComponent.tsx","App.tsx","reportWebVitals.ts","store/schedule/reducer.ts","store/classes/reducer.ts","store/preferences/reducer.ts","store/date/reducer.ts","store/substitutions/reducer.ts","store/root-reducer.ts","store/schedule/epics.ts","store/classes/epics.ts","store/date/epics.ts","store/substitutions/epics.ts","store/preferences/epics.ts","store/root-epic.ts","services/schedule-api.ts","services/index.ts","store/index.ts","index.tsx"],"names":["useStyles","makeStyles","theme","footer","backgroundColor","palette","background","paper","flexShrink","footerText","paddingRight","spacing","float","PageFooterComponent","classes","className","Typography","variant","align","gutterBottom","Link","target","href","color","setTheme","createAction","setClass","updateClass","addGroup","removeGroup","getFiltersForCurrentClass","state","groupFilters","class","preferencesGetFilters","preferences","getTimetableSize","schedule","flat","length","scheduleGetTimetableSize","filteredTimetable","timetable","undefined","JSON","parse","stringify","dayIdx","hourIdx","xd","filter","lesson","subject","group","find","v","scheduleFilteredTimetable","createStyles","root","width","height","overflow","listSection","ul","padding","dispatchProps","GroupFiltersComponent","memo","groups","selectedGroups","currentClass","cssClasses","handleToggle","lessonName","val","List","subheader","Object","keys","map","ListSubheader","ListItem","dense","button","onClick","ListItemIcon","Checkbox","edge","checked","tabIndex","disableRipple","ListItemText","primary","secondary","teacher","connect","minHeight","maxHeight","SettingsDialogComponent","open","onClose","useState","value","setValue","Dialog","aria-labelledby","maxWidth","fullWidth","DialogTitle","id","TabContext","TabList","indicatorColor","textColor","onChange","event","newValue","Tab","label","DialogContent","TabPanel","DialogActions","Button","loadClassesAsync","createAsyncAction","GetCurrentDateInPoland","Date","toLocaleString","timeZone","getClassesMenuContent","availableClasses","classesStatus","menuItemClicked","classParam","skeletonStyle","loading","Skeleton","animation","error","cla","MenuItem","selected","toolbar","borderBottom","divider","toolbarTitle","margin","flex","breakpoints","down","fontSize","sectionDesktop","display","up","sectionMobile","loadClasses","request","withRouter","isLoadingClasses","currentDateOffset","date","history","currentDate","addWeeks","cssStyleClasses","useParams","selectClassAnchorEl","setSelectClassAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","settingsOpen","setSettingsOpen","useEffect","selectClassOpen","Boolean","mobileOpen","handleSelectClassClick","currentTarget","handleSelectClassClose","mobileMenuId","themeIcon","themeClicked","IconButton","aria-label","getThemeIcon","feedbackIcon","Tooltip","title","arrow","component","githubIcon","settingsIcon","renderMobileMenu","Menu","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","currentStartOfWeek","startOfWeek","weekStartsOn","currentEndOfWeek","endOfWeek","Toolbar","Box","alignSelf","endIcon","PaperProps","style","push","noWrap","format","locale","pl","aria-controls","aria-haspopup","loadScheduleAsync","createGroupsAction","gcd","x","y","lcm","an","Error","last","pop","lcm_rec","capitalizeFirstLetter","s","navigator","language","charAt","toLocaleUpperCase","slice","HourDialogComponent","lessons","lessonNumber","dayIndex","currentWeekInterval","handleClose","CssBaseline","key","classroom","Divider","lessonTile","textStyle","LessonComponent","hexcolor","lessonsByHour","useFitText","logLevel","minFontSize","ref","setOpen","dialogData","setDialogData","setLessonNumber","split","hex","join","parseInt","substr","flexDirection","e","currentTargetRect","getBoundingClientRect","clickPositionFrac","pageX","left","right","lessonDurationFrac","duration","clickedPart","Math","floor","current","Node","contains","time_index","textAlign","day_index","getProcessedHourSlots","dayTimetable","maxCongetsion","Array","fill","i","totalWidth","processedHourSlot","hourSchedule","processedLessons","sort","a","b","aLen","bLen","localeCompare","ceil","remainingWidth","hourSlot","lessonStart","lessonEnd","min","DayTimetableComponent","textOverflow","whiteSpace","getLessonsByHour","processedHourSlots","gridRows","bottom","top","fromBottom","lessonTiles","result","cellFreeSpace","gridRowStart","gridRowEnd","toString","gridRow","gridColumn","gridTemplateColumns","columnGap","gridTemplateRows","HeaderSlotComponent","lessonIdx","startOfLesson","addMinutes","TimetableHeaderComponent","hm","setHours","idx","nextWeek","previousWeek","setDate","dateChanged","loadSubstitutionsAsync","textWrapper","textSection","switchViewsButton","prevWeek","navigationButtonText","onNavButtonClick","size","visibility","filterAlert","timetableWrapper","gridAutoFlow","rowGap","transform","loadTimetable","loadSubstitutions","timetableStatus","isLoadingSchedule","timetableSize","useHistory","today","daysInCurrentWeek","eachDayOfInterval","start","end","from","inline","subBlock1","subBlock2","singleBlock","SingleDaySubstitutionComponent","dayOfWeek","substitution","formattedDate","console","log","alignItems","sub","time_signature","comment","substitutions","substitutionsStatus","isLoadingSubstitutions","daysInWeek","_","currDay","preferredTheme","window","matchMedia","matches","computedTheme","React","useMemo","createMuiTheme","type","overrides","MuiCssBaseline","body","scrollbarWidth","scrollbarColor","bordeRadius","border","typography","caption","ThemeProvider","path","to","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","createReducer","handleAction","failure","success","action","payload","resp","scheduleReducer","combineReducers","classesReducer","themeReducer","classReducer","groupFiltersReducer","newState","meta","newGroupsForCurrentClass","persistConfig","storage","blacklist","preferencesReducer","persistCombineReducers","dateReducer","response","substitutionsReducer","rootReducer","loadScheduleEpic","action$","state$","api","pipe","isActionOf","withLatestFrom","switchMap","getSchedule","concatMap","transformTimetableResponse","catchError","message","of","onDateChanged","onClassChanged","time","newFilters","forEach","cl","timeEnd","loadClassesEpic","getClasses","nextWeekEpic","mapTo","loadSubstitutionsEpic","mergeMap","weekOffset","dayFromDestinationWeek","firstDayOfWeek","lastDayOfWeek","day","differenceInCalendarDays","offset","getSubstitutions","req","GetSubstitutionsRequestsForCurrentWeek","mergeAll","updateClassEpic","iif","EMPTY","combineEpics","values","scheduleEpics","classesEpics","dateEpics","preferencesEpics","substitutionsEpics","fetch","json","apis","epicMiddleware","createEpicMiddleware","dependencies","services","middlewares","enhancer","composeWithDevTools","applyMiddleware","store","createStore","run","rootEpic","persistor","persistStore","ReactDOM","render","StrictMode","CircularProgress","document","getElementById"],"mappings":"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","file":"static/js/main.99d65b22.chunk.js","sourcesContent":["import { Link, makeStyles, Typography } from \"@material-ui/core\";\nimport React, { FunctionComponent } from \"react\";\n\nconst useStyles = makeStyles((theme) => ({\n    footer: {\n        backgroundColor: theme.palette.background.paper,\n        flexShrink: 0,\n    },\n    footerText: {\n        paddingRight: theme.spacing(1),\n        float: 'right',\n    },\n}));\n\nconst PageFooterComponent: FunctionComponent = () => {\n    const classes = useStyles();\n    return <footer className={classes.footer}>\n        <Typography variant=\"caption\" align=\"center\" gutterBottom>\n            <div className={classes.footerText}>\n                <Link target=\"_blank\" href=\"https://github.com/cloud11665/vlott\" color=\"secondary\">API rozkładu zajęć</Link>\n                &nbsp;stworzone przez&nbsp;\n                <Link target=\"_blank\" href=\"https://github.com/cloud11665\" color=\"secondary\">cloud11665</Link>\n                ,&nbsp;\n                <Link target=\"_blank\" href=\"https://github.com/qepasa/VLO-Schedule\" color=\"secondary\">frontend</Link>\n                &nbsp;przez&nbsp;\n                <Link target=\"_blank\" href=\"https://github.com/qepasa\" color=\"secondary\">qepasa</Link>\n            </div>\n        </Typography>\n    </footer>;\n};\n\nexport default PageFooterComponent;\n","import { Lesson } from \"ApiModel\";\nimport { createAction } from \"typesafe-actions\";\n\nexport const setTheme = createAction('SET_THEME')<string>();\n\nexport const setClass = createAction('SET_CLASS')<string>();\n\nexport const updateClass = createAction('UPDATE_CLASS')<string>();\n\nexport const addGroup = createAction('ADD_GROUP')<Lesson, string>();\n\nexport const removeGroup = createAction('REMOVE_GROUP')<Lesson, string>();\n\n","import { RootState } from \"typesafe-actions\";\nimport { getFiltersForCurrentClass as preferencesGetFilters } from \"./preferences/selectors\";\nimport { getTimetableSize as scheduleGetTimetableSize, filteredTimetable as scheduleFilteredTimetable } from \"./schedule/selectors\";\n\nexport const getFiltersForCurrentClass = (state: RootState) => preferencesGetFilters(state.preferences);\n\nexport const getTimetableSize = (state: RootState) => scheduleGetTimetableSize(state.schedule);\n\nexport const filteredTimetable = (state: RootState) => scheduleFilteredTimetable(state.schedule, state.preferences.groupFilters[state.preferences.class]);","import { PreferencesState } from './reducer';\n\nexport const getFiltersForCurrentClass = (state: PreferencesState) => state.groupFilters[state.class];","import { GroupFilter, WeekSchedule } from 'ApiModel';\nimport { ScheduleState } from './reducer';\n\nexport const getSchedule = (state: ScheduleState) => state.schedule;\n\nexport const getTimetableSize = (state: ScheduleState) => state.schedule.flat().flat().length;\n\nexport const filteredTimetable = (state: ScheduleState, groupFilters: GroupFilter) => {\n    const timetable = state.schedule;\n\n    if (timetable.length === 0) return [];\n    if (groupFilters === undefined) return timetable;\n\n    const filteredTimetable: WeekSchedule = JSON.parse(JSON.stringify(timetable));\n    for (let dayIdx = 0; dayIdx < filteredTimetable.length; ++dayIdx) {\n        for (let hourIdx = 0; hourIdx < filteredTimetable[dayIdx].length; ++hourIdx) {\n            const xd = filteredTimetable[dayIdx][hourIdx].filter(lesson =>\n                (groupFilters[lesson.subject] === undefined) ||\n                (lesson.group === \"\") ||\n                (groupFilters[lesson.subject] !== undefined && groupFilters[lesson.subject].find(v => v.group === lesson.group) !== undefined)\n            );\n            filteredTimetable[dayIdx][hourIdx] = xd;\n        }\n    }\n    return filteredTimetable;\n}","import { Checkbox, createStyles, List, ListItem, ListItemIcon, ListItemText, ListSubheader, makeStyles, Theme, Typography } from \"@material-ui/core\";\nimport React, { FunctionComponent, memo } from \"react\";\nimport { RootState } from \"typesafe-actions\";\nimport { connect } from \"react-redux\";\nimport { Lesson } from \"ApiModel\";\nimport { addGroup, removeGroup } from \"../../store/preferences/actions\";\nimport { getFiltersForCurrentClass } from \"../../store/root-selectors\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        root: {\n            width: '100%',\n            // minWidth: '30vw',\n            backgroundColor: theme.palette.background.paper,\n            // minHeight: '10vh',\n            // maxHeight: '70vh',\n            height: 'inherit',\n            overflow: 'auto',\n        },\n        listSection: {\n            backgroundColor: 'inherit',\n        },\n        ul: {\n            backgroundColor: 'inherit',\n            padding: 0,\n        },\n    }));\n\nconst mapStateToProps = (state: RootState) => ({\n    groups: state.schedule.groups,\n    selectedGroups: getFiltersForCurrentClass(state),\n    currentClass: state.preferences.class,\n});\n\nconst dispatchProps = {\n    addGroup: addGroup,\n    removeGroup: removeGroup,\n};\n\ntype GroupFiltersProps = ReturnType<typeof mapStateToProps> & typeof dispatchProps;\n\nconst GroupFiltersComponent: FunctionComponent<GroupFiltersProps> = memo(({ groups, selectedGroups, currentClass, addGroup, removeGroup }) => {\n    const cssClasses = useStyles();\n\n    const handleToggle = (lessonName: string, lesson: Lesson) => () => {\n        const isActive = selectedGroups[lessonName].find(val => val.group === lesson.group) !== undefined;\n\n        if (isActive) {\n            removeGroup(lesson, currentClass);\n        } else {\n            addGroup(lesson, currentClass);\n        }\n    }\n\n    return <>\n        <Typography color=\"error\" variant=\"h6\">\n            Uwaga! Ta funkcjonalność jest eksperymentalna.\n        </Typography>\n        <Typography>\n            Upewnij się, że plan lekcji po zastosowaniu filtrów wygląda tak jak się spodziewasz.\n        </Typography>\n        <List subheader={<li />} className={cssClasses.root}>\n            {Object.keys(groups).map(lessonName =>\n                <li key={`section-${lessonName}`} className={cssClasses.listSection}>\n                    <ul className={cssClasses.ul}>\n                        <ListSubheader>{lessonName}</ListSubheader>\n                        {groups[lessonName].map(lesson =>\n                            <ListItem key={`item-${lessonName}-${lesson.group}`} dense button onClick={handleToggle(lessonName, lesson)}>\n                                <ListItemIcon>\n                                    <Checkbox\n                                        edge=\"start\"\n                                        checked={selectedGroups[lessonName].find(val => val.group === lesson.group) !== undefined}\n                                        tabIndex={-1}\n                                        disableRipple\n                                    />\n                                </ListItemIcon>\n                                <ListItemText primary={lesson.group} secondary={`Nauczyciel: ${lesson.teacher}`} />\n                            </ListItem>\n                        )}\n                    </ul>\n                </li>\n            )}\n        </List>\n    </>;\n});\n\nexport default connect(mapStateToProps, dispatchProps)(GroupFiltersComponent);","import { Button, createStyles, Dialog, DialogActions, DialogContent, DialogTitle, makeStyles, Tab } from \"@material-ui/core\";\nimport { TabContext, TabList, TabPanel } from \"@material-ui/lab\";\nimport React, { FunctionComponent, useState } from \"react\";\nimport GroupFiltersComponent from \"./GroupFiltersComponent\";\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        root: {\n            minHeight: '50vh',\n            maxHeight: '90vh',\n        },\n    }));\n\ntype SettingsDialogOwnProps = {\n    open: boolean;\n    onClose: () => void;\n};\n\ntype SettingsDialogProps = SettingsDialogOwnProps;\n\nconst SettingsDialogComponent: FunctionComponent<SettingsDialogProps> = ({ open, onClose }) => {\n    const cssClasses = useStyles();\n    const [value, setValue] = useState('1');\n\n    const handleChange = (event: React.ChangeEvent<{}>, newValue: string) => {\n        setValue(newValue);\n    };\n\n    return <Dialog open={open} onClose={onClose} aria-labelledby=\"settings-dialog\" className={cssClasses.root} maxWidth=\"md\" fullWidth>\n        <DialogTitle id=\"settings-dialog-title\">Ustawienia</DialogTitle>\n        <TabContext value={value} >\n            <TabList\n                indicatorColor=\"secondary\"\n                textColor=\"secondary\"\n                onChange={handleChange}\n            >\n                <Tab label=\"Filtry grup\" textColor=\"secondary\" value=\"1\"></Tab>\n            </TabList>\n            <DialogContent>\n                <TabPanel value=\"1\" >\n                    <GroupFiltersComponent />\n                </TabPanel>\n            </DialogContent>\n        </TabContext>\n        <DialogActions>\n            <Button onClick={onClose} color=\"secondary\">Zamknij</Button>\n        </DialogActions>\n    </Dialog>;\n};\n\nexport default SettingsDialogComponent;","import { GetClassesResponse } from \"ApiModel\";\nimport { createAsyncAction } from \"typesafe-actions\";\n\nexport const loadClassesAsync = createAsyncAction(\n    'LOAD_CLASSES_REQUEST',\n    'LOAD_CLASSES_SUCCESS',\n    'LOAD_CLASSES_FAILURE'\n)<undefined, GetClassesResponse, string>();","export function GetCurrentDateInPoland(): Date {\n    return new Date(new Date().toLocaleString(\"en-US\", { timeZone: \"Europe/Warsaw\" }));\n}","import { Box, Button, IconButton, makeStyles, Menu, MenuItem, Toolbar, Tooltip, Typography } from \"@material-ui/core\";\nimport React, { FunctionComponent, useEffect, useState } from \"react\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport { RouteComponentProps, useParams, withRouter } from \"react-router-dom\";\nimport SchoolIcon from '@material-ui/icons/School';\nimport { RootState } from \"typesafe-actions\";\nimport { connect } from \"react-redux\";\nimport MailIcon from '@material-ui/icons/Mail';\nimport GitHubIcon from '@material-ui/icons/GitHub';\nimport { setTheme } from \"../store/preferences/actions\";\nimport NightsStayIcon from '@material-ui/icons/NightsStay';\nimport WbSunnyIcon from '@material-ui/icons/WbSunny';\nimport { ClassesStatus } from \"ApiModel\";\nimport ErrorIcon from '@material-ui/icons/Error';\nimport MoreIcon from '@material-ui/icons/MoreVert';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport SettingsDialogComponent from \"./settings/SettingsDialogComponent\";\nimport { addWeeks, endOfWeek, format, startOfWeek } from \"date-fns\";\nimport { pl } from \"date-fns/locale\";\nimport { loadClassesAsync } from \"../store/classes/actions\";\nimport { GetCurrentDateInPoland } from \"../utils/time-utils\";\n\nconst getThemeIcon = (theme: string, themeClicked: () => void) => {\n    if (theme === 'light') {\n        return <IconButton aria-label=\"theme-button\" color=\"inherit\" onClick={themeClicked}>\n            < NightsStayIcon />\n        </IconButton>;\n    } else {\n        return <IconButton aria-label=\"theme-button\" color=\"inherit\" onClick={themeClicked}>\n            < WbSunnyIcon />\n        </IconButton>;\n    }\n}\n\nconst getClassesMenuContent = (\n    availableClasses: string[], classesStatus: ClassesStatus, menuItemClicked: (c: string) => (() => void), classParam: string, skeletonStyle: string,\n) => {\n    if (classesStatus.loading) {\n        return <>\n            <Skeleton width=\"3vw\" className={skeletonStyle} animation=\"wave\" />\n            <Skeleton width=\"3vw\" className={skeletonStyle} animation=\"wave\" />\n            <Skeleton width=\"3vw\" className={skeletonStyle} animation=\"wave\" />\n        </>\n    } else if (classesStatus.error) {\n        return <div>\n            <ErrorIcon color=\"error\" />\n            <Typography variant=\"caption\" color=\"error\">\n                Wystąpił błąd podczas ładowania klas. Odśwież stronę.\n            </Typography>\n        </div>\n    }\n    return <div>\n        {availableClasses.map(cla => <MenuItem key={cla} onClick={menuItemClicked(cla)} selected={cla === classParam}>{cla}</MenuItem>)}\n    </div>;\n}\n\nconst useStyles = makeStyles((theme) => ({\n    toolbar: {\n        borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    toolbarTitle: {\n        margin: theme.spacing(1),\n        flex: 1,\n        [theme.breakpoints.down('md')]: {\n            fontSize: '125%',\n        }\n    },\n    sectionDesktop: {\n        display: 'none',\n        [theme.breakpoints.up('md')]: {\n            display: 'flex',\n        },\n    },\n    sectionMobile: {\n        display: 'flex',\n        [theme.breakpoints.up('md')]: {\n            display: 'none',\n        },\n    },\n    skeletonStyle: {\n        margin: theme.spacing(1),\n    }\n}));\n\nconst mapStateToProps = (state: RootState) => ({\n    availableClasses: state.classes.classes,\n    classesStatus: state.classes.isLoadingClasses,\n    preferences: state.preferences,\n    currentDateOffset: state.date\n});\n\nconst dispatchProps = {\n    setTheme: setTheme,\n    loadClasses: loadClassesAsync.request,\n};\n\ntype PageHeaderProps = ReturnType<typeof mapStateToProps> & typeof dispatchProps & RouteComponentProps;\n\ntype HeaderParams = {\n    classParam: string,\n};\n\nconst PageHeaderComponent: FunctionComponent<PageHeaderProps> = ({ availableClasses, classesStatus, preferences, currentDateOffset, setTheme, loadClasses, history }) => {\n    const currentDate = addWeeks(GetCurrentDateInPoland(), currentDateOffset);\n    const cssStyleClasses = useStyles();\n    const classParam = useParams<HeaderParams>().classParam;\n    const [selectClassAnchorEl, setSelectClassAnchorEl] = useState<null | HTMLElement>(null);\n    const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = useState<null | HTMLElement>(null);\n    const [settingsOpen, setSettingsOpen] = useState<boolean>(false);\n\n    useEffect(() => { loadClasses(); }, []);\n\n    const selectClassOpen = Boolean(selectClassAnchorEl);\n    const mobileOpen = Boolean(mobileMoreAnchorEl);\n\n    const handleSelectClassClick = (event: React.MouseEvent<HTMLElement>) => {\n        setSelectClassAnchorEl(event.currentTarget);\n    };\n\n    const handleSelectClassClose = () => {\n        setSelectClassAnchorEl(null);\n    };\n\n    const selectClassMenuItemClicked = (cla: string) => (() => {\n        handleSelectClassClose();\n        history.push(`${cla}`);\n    });\n\n    const themeClicked = () => {\n        if (preferences.theme === \"dark\") {\n            setTheme(\"light\")\n        } else {\n            setTheme(\"dark\");\n        }\n    }\n\n    const handleMobileMenuClose = () => {\n        setMobileMoreAnchorEl(null);\n    }\n    const mobileMenuId = 'primary-search-account-menu-mobile';\n    const handleMobileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\n        setMobileMoreAnchorEl(event.currentTarget);\n    };\n\n    const handleSettingsOpen = () => {\n        setSettingsOpen(true);\n    };\n\n    const handleSettingsClose = () => {\n        setSettingsOpen(false);\n    };\n\n    const themeIcon = getThemeIcon(preferences.theme, themeClicked);\n    const feedbackIcon = (\n        <Tooltip title={\"Wyślij do nas maila!\"} aria-label={\"send-feedback-tooltip\"} arrow>\n            <IconButton aria-label=\"send-feedback\" color=\"inherit\" component=\"a\" href=\"mailto:feedback.vlorocks@gmail.com?subject=Zg%C5%82o%C5%9B%20B%C5%82%C4%85d\" target=\"_blank\">\n                <MailIcon />\n            </IconButton>\n        </Tooltip>);\n    const githubIcon = (\n        <Tooltip title={\"Kod na Githubie\"} aria-label={\"github-repo-tooltip\"} arrow>\n            <IconButton aria-label=\"github-repo\" color=\"inherit\" component=\"a\" href=\"https://github.com/qepasa/VLO-Schedule\" target=\"_blank\">\n                <GitHubIcon />\n            </IconButton>\n        </Tooltip>);\n    const settingsIcon = (\n        <>\n            <IconButton aria-label=\"settings-button\" color=\"inherit\" onClick={handleSettingsOpen}>\n                <SettingsIcon />\n            </IconButton>\n            <SettingsDialogComponent open={settingsOpen} onClose={handleSettingsClose} />\n        </>\n    );\n\n    const renderMobileMenu = (\n        <Menu\n            anchorEl={mobileMoreAnchorEl}\n            anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n            id={mobileMenuId}\n            keepMounted\n            transformOrigin={{ vertical: 'top', horizontal: 'right' }}\n            open={mobileOpen}\n            onClose={handleMobileMenuClose}\n        >\n            <MenuItem>\n                {themeIcon}\n            </MenuItem>\n            <MenuItem>\n                {settingsIcon}\n            </MenuItem>\n            <MenuItem>\n                {feedbackIcon}\n            </MenuItem>\n            <MenuItem>\n                {githubIcon}\n            </MenuItem>\n        </Menu>\n    );\n\n    const currentStartOfWeek = startOfWeek(currentDate, { weekStartsOn: 1 });\n    const currentEndOfWeek = endOfWeek(currentDate, { weekStartsOn: 1 });\n\n    return <Toolbar className={cssStyleClasses.toolbar}>\n        <Box alignSelf=\"left\">\n            <Button\n                className={cssStyleClasses.sectionDesktop}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={handleSelectClassClick}\n                endIcon={<SchoolIcon />}>\n                Wybierz klasę\n            </Button>\n            <IconButton onClick={handleSelectClassClick} color=\"primary\" className={cssStyleClasses.sectionMobile}>\n                <SchoolIcon />\n            </IconButton>\n            <Menu\n                id=\"classes-menu\"\n                anchorEl={selectClassAnchorEl}\n                keepMounted\n                open={selectClassOpen}\n                onClose={handleSelectClassClose}\n                PaperProps={{\n                    style: {\n                        maxHeight: '70vh',\n                    }\n                }}>\n                {getClassesMenuContent(availableClasses, classesStatus, selectClassMenuItemClicked, classParam, cssStyleClasses.skeletonStyle)}\n            </Menu>\n        </Box>\n        <Typography\n            component=\"h2\"\n            variant=\"h5\"\n            color=\"inherit\"\n            align=\"center\"\n            noWrap\n            className={cssStyleClasses.toolbarTitle}\n        >\n            Rozkład klasy {classParam} ({format(currentStartOfWeek, 'dd MMM', { locale: pl }) + ' - ' + format(currentEndOfWeek, 'dd MMM', { locale: pl })})\n        </Typography>\n        <div className={cssStyleClasses.sectionDesktop}>\n            {themeIcon}\n            {settingsIcon}\n            {feedbackIcon}\n            {githubIcon}\n        </div>\n        <div className={cssStyleClasses.sectionMobile}>\n            <IconButton\n                aria-label=\"show more\"\n                aria-controls={mobileMenuId}\n                aria-haspopup=\"true\"\n                onClick={handleMobileMenuOpen}\n                color=\"inherit\"\n            >\n                <MoreIcon />\n            </IconButton>\n            {renderMobileMenu}\n        </div>\n    </Toolbar >\n};\n\nexport default withRouter(connect(mapStateToProps, dispatchProps)(PageHeaderComponent));","import { GetScheduleResponse, GroupFilter } from \"ApiModel\";\nimport { createAction, createAsyncAction } from \"typesafe-actions\";\n\nexport const loadScheduleAsync = createAsyncAction(\n    'LOAD_SCHEDULE_REQUEST',\n    'LOAD_SCHEDULE_SUCCESS',\n    'LOAD_SCHEDULE_FAILURE'\n)<string, GetScheduleResponse, string>();\n\n\nexport const createGroupsAction = createAction('CREATE_GROUPS')<GroupFilter, string>();","\n// NOTE(pawelp): using 'number' here is okay since we're not expecting \n// arguments larger than sqrt(2^53-1) (Number.MAX_SAFE_INTEGER). In reality we're expecting ~thousands here at any time?\n\n\nfunction gcd(x: number, y: number): number {\n    if (y > x) {\n        return gcd(y, x);\n    }\n    if (y === 0) {\n        return x;\n    }\n    return gcd(y, x % y);\n}\n\nexport function lcm(an: number[]): number {\n    if (an.length === 0) { throw Error('You need to pass at least one number!'); }\n    if (an.length === 1) return an[0];\n    if (an.length === 2) return (an[0] * an[1]) / gcd(an[0], an[1]);\n\n    const last = an.pop();\n    const lcm_rec = lcm(an);\n    return (last! * lcm_rec) / gcd(last!, lcm_rec);\n}\n\n\n\n/*!\n * Get the contrasting color for any hex color\n * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com\n * Derived from work by Brian Suda, https://24ways.org/2010/calculating-color-contrast/\n * @param  {String} A hexcolor value\n * @return {String} The contrasting color (black or white)\n */\nexport function getContrast (hexcolor: string){\n\n\t// If a leading # is provided, remove it\n\tif (hexcolor.slice(0, 1) === '#') {\n\t\thexcolor = hexcolor.slice(1);\n\t}\n\n\t// If a three-character hexcode, make six-character\n\tif (hexcolor.length === 3) {\n\t\thexcolor = hexcolor.split('').map(function (hex) {\n\t\t\treturn hex + hex;\n\t\t}).join('');\n\t}\n\n\t// Convert to RGB value\n\tvar r = parseInt(hexcolor.substr(0,2),16);\n\tvar g = parseInt(hexcolor.substr(2,2),16);\n\tvar b = parseInt(hexcolor.substr(4,2),16);\n\n\t// Get YIQ ratio\n\tvar yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;\n\n\t// Check contrast\n\treturn (yiq >= 70) ? 'black' : 'white';\n};","\nexport function capitalizeFirstLetter(s: string, locale = navigator.language) {\n  return s.charAt(0).toLocaleUpperCase(locale) + s.slice(1);\n}","import React, { FunctionComponent, memo } from \"react\";\nimport { Lesson } from 'ApiModel';\nimport { Button, CssBaseline, Dialog, DialogActions, DialogContent, DialogTitle, Divider, List, ListItem, ListItemText, Typography } from \"@material-ui/core\";\nimport { pl } from \"date-fns/locale\";\nimport { format } from \"date-fns\";\nimport { capitalizeFirstLetter } from \"../../../../utils/string-uitls\";\n\ntype HourDialogComponentOwnProps = {\n    lessons: Lesson[];\n    lessonNumber: number;\n    dayIndex: number,\n    onClose: (() => void);\n    open: boolean;\n    currentWeekInterval: Date[];\n};\n\ntype HourDialogComponentProps = HourDialogComponentOwnProps;\n\nconst HourDialogComponent: FunctionComponent<HourDialogComponentProps> = memo(({ lessons, lessonNumber, dayIndex, onClose, open, currentWeekInterval }) => {\n    if (!lessons) {\n        return <div></div>;\n    }\n    const handleClose = () => {\n        onClose();\n    };\n    return <>\n        <CssBaseline />\n        <Dialog onClose={handleClose} aria-labelledby=\"lessons-list-dialog\" open={open} fullWidth>\n            <DialogTitle id=\"lessons-list-dialog-title\">\n                {capitalizeFirstLetter(format(currentWeekInterval[dayIndex], \"cccc\", { locale: pl }))} - lekcja {lessonNumber}\n            </DialogTitle>\n            <DialogContent>\n                <List>\n                    {lessons.map(lesson => {\n                        const key = lesson.subject + lesson.teacher + lesson.color + lesson.group;\n                        return (<>\n                            <ListItem key={key}>\n                                <ListItemText\n                                    primary={`${lesson.subject}${lesson.group ? \" - \" + lesson.group : \"\"}`}\n                                    secondary={<>\n                                        <Typography component=\"a\" variant=\"body2\" key={key + \"Teacher\"}>Nauczyciel: {lesson.teacher}</Typography>\n                                        <br />\n                                        <Typography component=\"a\" variant=\"body2\" key={key + \"Classroom\"}>Sala: {lesson.classroom}</Typography>\n                                    </>}\n                                    key={key + \"ListItemText\"}\n                                />\n                            </ListItem>\n                            <Divider variant=\"middle\" component=\"li\" key={key + \"Divider\"} />\n                        </>)\n                    })}\n                </List>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose} color=\"secondary\">Zamknij</Button>\n            </DialogActions>\n        </Dialog>\n    </>\n});\n\nexport default HourDialogComponent;","import { makeStyles } from '@material-ui/core';\nimport { Lesson } from 'ApiModel';\nimport React, { FunctionComponent, memo, useState } from 'react';\nimport useFitText from 'use-fit-text';\nimport HourDialogComponent from './HourDialogComponent';\nimport { getContrast } from '../../../../utils/math-utils';\n\ntype LessonComponentOwnProps = {\n    lesson: Lesson;\n    height: string;\n    lessonsByHour: Lesson[][];\n    currentWeekInterval: Date[];\n};\n\ntype LessonComponentProps = LessonComponentOwnProps;\n\n\nconst useStyles = makeStyles((theme) => ({\n    lessonTile: {\n        padding: theme.spacing(0.2),\n    },\n    textStyle: {\n        // NOTE(pawelp): fiddle with this if you want to make text colors fancy\n        // filter: 'invert(5%) contrast(200%) grayscale(170%) saturate(0%)'\n    }\n}));\n\nconst LessonComponent: FunctionComponent<LessonComponentProps> = memo(({ lesson, height, lessonsByHour, currentWeekInterval }) => {\n    const cssStyleClasses = useStyles();\n    const { fontSize, ref } = useFitText({ logLevel: \"none\", minFontSize: 5 });\n    const [open, setOpen] = useState(false);\n    const [dialogData, setDialogData] = useState<Lesson[]>([]);\n    const [lessonNumber, setLessonNumber] = useState<number>(0);\n\n    const handleClose = () => {\n        setOpen(false);\n    }\n\n    const handleClick = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n        let currentTargetRect = e.currentTarget.getBoundingClientRect();\n        const clickXPosRelative = e.pageX - currentTargetRect.left;\n        const clickPositionFrac = clickXPosRelative / (currentTargetRect.right - currentTargetRect.left);\n        const lessonDurationFrac = 1 / lesson.duration;\n        const clickedPart = Math.floor(clickPositionFrac / lessonDurationFrac);\n\n        if (e.target === ref.current ||\n            (e.target instanceof Node && ref.current.contains(e.target))) {\n            setDialogData(lessonsByHour[lesson.time_index + clickedPart]);\n            setLessonNumber(lesson.time_index + clickedPart);\n            setOpen(true);\n        }\n    }\n    const textColor = getContrast(lesson.color);\n\n    return <div style={{\n        fontSize, height: height, overflow: 'hidden', display: 'flex', flexDirection: 'column'\n    }} ref={ref} onClick={handleClick} className={cssStyleClasses.lessonTile}>\n        <div style={{\n            textAlign: 'left', flex: \"1 0 auto\", color: textColor,\n        }} className={cssStyleClasses.textStyle}>{lesson.teacher}</div>\n        <div style={{ textAlign: 'center', flex: \"1 0 auto\", color: textColor }} className={cssStyleClasses.textStyle}>{lesson.subject}</div>\n        <div style={{ flexShrink: 0, color: textColor }} className={cssStyleClasses.textStyle}>\n            <div style={{ float: 'left', textAlign: 'left' }}>{lesson.classroom}</div>\n            <div style={{ float: 'right', textAlign: 'right' }}>{lesson.group}</div>\n        </div>\n        <HourDialogComponent lessons={dialogData} lessonNumber={lessonNumber} dayIndex={lesson.day_index} onClose={handleClose} open={open} currentWeekInterval={currentWeekInterval} />\n    </div>;\n});\n\nexport default LessonComponent;","import React, { FunctionComponent } from \"react\";\nimport { DaySchedule, Lesson } from 'ApiModel';\nimport { format } from \"date-fns\";\nimport { lcm } from \"../../../../utils/math-utils\";\nimport LessonComponent from \"../hourTimetable/LessonComponent\";\nimport { pl } from \"date-fns/locale\";\n\ntype PositionData = {\n    width: number,\n};\n\ntype ProcessedLesson = Lesson & PositionData;\n\ntype ProcessedHourSlot = {\n    lessons: Array<ProcessedLesson>; // lessons that start at current slot. Sorted by (time_index+duration, subject) descending.\n    totalWidth: number;\n    ceil: number;\n    floor: number;\n}\n\ntype CellPositionData = {\n    top: number;\n    bottom: number;\n}\n\nfunction getLessonsByHour(dayTimetable: DaySchedule) {\n    const lessonsByHour = [...Array(11)].map(() => Array<Lesson>());\n\n    dayTimetable.flat().map(lesson => {\n        for (let i = 0; i < lesson.duration; i++) {\n            lessonsByHour[lesson.time_index + i].push(lesson);\n        }\n    });\n    return lessonsByHour;\n}\n\n\nfunction getProcessedHourSlots(dayTimetable: DaySchedule, lessonsByHour: Lesson[][]): Array<ProcessedHourSlot> {\n    const maxCongetsion = Array(11).fill(0);\n    for (let i = 0; i < 11; ++i) {\n        maxCongetsion[i] = lessonsByHour[i].length;\n    }\n\n    const totalWidth = lcm(maxCongetsion.filter(val => val !== 0));\n\n    const processedHourSlot = dayTimetable.map(hourSchedule => {\n        const processedLessons = hourSchedule.map(lesson => { return lesson as ProcessedLesson });\n\n        processedLessons.sort((a, b) => {\n            const aLen = a.time_index + a.duration - 1;\n            const bLen = b.time_index + b.duration - 1;\n            if (aLen === bLen) {\n                return a.subject.localeCompare(b.subject);\n            }\n            return aLen > bLen ? -1 : 1;\n        });\n        return {\n            lessons: processedLessons,\n            totalWidth: totalWidth,\n            ceil: totalWidth,\n            floor: 0,\n        } as ProcessedHourSlot;\n    });\n    const remainingWidth = Array(11).fill(totalWidth);\n    /// calculate remaining width for each slot individually!!!!\n    for (const hourSlot of processedHourSlot) {\n        for (const lesson of hourSlot.lessons) {\n            const lessonStart = lesson.time_index, lessonEnd = lesson.time_index + lesson.duration;\n            let width = totalWidth + 1;\n            for (let i = lessonStart; i < lessonEnd; ++i) {\n                width = Math.min(width, Math.floor(remainingWidth[i] / maxCongetsion[i]));\n            }\n            lesson.width = width;\n            for (let i = lessonStart; i < lessonEnd; ++i) {\n                maxCongetsion[i]--;\n                remainingWidth[i] -= width;\n            }\n        }\n    }\n\n    return processedHourSlot;\n}\n\ntype DayTimetableOwnProps = {\n    dayTimetable: DaySchedule;\n    dayIdx: number;\n    currentWeekInterval: Date[];\n};\n\ntype DayTimetableProps = DayTimetableOwnProps;\n\nconst DayTimetableComponent: FunctionComponent<DayTimetableProps> = ({ dayTimetable, dayIdx, currentWeekInterval }) => {\n    if (!dayTimetable || dayTimetable.length === 0) {\n        return <>\n            <div style={{ textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap' }}>\n                {format(currentWeekInterval[dayIdx], \"iii\", { locale: pl })}\n            </div>\n            <div></div>\n        </>;\n    }\n\n    const lessonsByHour = getLessonsByHour(dayTimetable);\n    const processedHourSlots = getProcessedHourSlots(dayTimetable, lessonsByHour);\n\n    const gridRows = processedHourSlots.length > 0 ? processedHourSlots[0].totalWidth : 1;\n\n    const remainingWidth = Array<CellPositionData>(11);\n    for (let i = 0; i < 11; ++i) {\n        remainingWidth[i] = {\n            bottom: 1,\n            top: gridRows + 1,\n        };\n    }\n    let fromBottom: boolean = true;\n\n    const lessonTiles = processedHourSlots.map(hourSlot => {\n        const result = [];\n        for (const lesson of hourSlot.lessons) {\n\n            let cellFreeSpace = remainingWidth[lesson.time_index];\n            let gridRowStart, gridRowEnd;\n            if (fromBottom) {\n                gridRowStart = cellFreeSpace.bottom;\n                gridRowEnd = cellFreeSpace.bottom + lesson.width;\n            } else {\n                gridRowEnd = cellFreeSpace.top;\n                gridRowStart = cellFreeSpace.top - lesson.width;\n            }\n\n            const key = lesson.day_index.toString() + lesson.time_index.toString() + lesson.classroom.toString() + lesson.subject + lesson.teacher + lesson.group;\n\n            result.push(<div style={\n                {\n                    backgroundColor: `${lesson.color}`,\n                    gridRow: `${gridRowStart.toString()} / ${gridRowEnd.toString()}`,\n                    gridColumn: `${(lesson.time_index + 1).toString()} / ${(lesson.time_index + lesson.duration + 1).toString()}`,\n\n                }} key={key}>\n                <LessonComponent lesson={lesson} height={(15 * lesson.width / gridRows) + 'vh'} lessonsByHour={lessonsByHour} currentWeekInterval={currentWeekInterval} />\n            </div>);\n            for (let i = lesson.time_index; i < lesson.time_index + lesson.duration; i++) {\n                if (fromBottom) {\n                    remainingWidth[i].bottom = gridRowEnd;\n                } else {\n                    remainingWidth[i].top = gridRowStart;\n                }\n            }\n\n            fromBottom = !fromBottom;\n        }\n        return result;\n    })\n    return <>\n        <div style={{ textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap' }}>\n            {format(currentWeekInterval[dayIdx], \"iii\", { locale: pl })}\n        </div>\n        <div style={{ display: 'grid', gridTemplateColumns: `repeat(11, calc(90vw/11))`, columnGap: '1px', gridTemplateRows: `repeat(${gridRows}, calc(15vh/${gridRows}))` }}>\n            {lessonTiles.flat()}\n        </div>\n    </>;\n};\n\nexport default DayTimetableComponent;\n","import { Box } from \"@material-ui/core\";\nimport { addMinutes, format } from \"date-fns\";\nimport React, { FunctionComponent } from \"react\";\nimport useFitText from \"use-fit-text\";\n\ntype HeaderSlotComponentProps = {\n    lessonIdx: number;\n    startOfLesson: number;\n}\n\nconst HeaderSlotComponent: FunctionComponent<HeaderSlotComponentProps> = ({ lessonIdx, startOfLesson }) => {\n    const { fontSize, ref } = useFitText();\n    return <Box height=\"5vh\" overflow=\"hidden\" whiteSpace=\"nowrap\" textOverflow=\"elipsis\">\n        <div style={{ fontSize }} ref={ref}>\n            <div>{lessonIdx.toString()}</div>\n            <div>{format(startOfLesson, \"HH:mm\") + \"-\" + format(addMinutes(startOfLesson, 45), \"HH:mm\")}</div>\n        </div>\n    </Box>\n}\n\n\nexport default HeaderSlotComponent;","import React, { FunctionComponent, memo } from \"react\";\nimport HeaderSlotComponent from \"./HeaderSlotComponent\";\n\n\ntype TimetableHeaderOwnProps = {\n};\n\nconst TimetableHeaderComponent: FunctionComponent<TimetableHeaderOwnProps> = memo(() => {\n    // todo(pawelp): this is ugly. Probably should extract this data somewhere else (e.g. to redux).\n    const startOfLessonArray = [\n        '7:10', '8:00', '9:00', '10:00', '11:00', '12:00', '13:00', '14:00', '14:50', '15:40', '16:30',\n    ];\n    return <>\n        <div></div>\n        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(11, calc(90vw/11))', columnGap: '1px' }}>\n            {startOfLessonArray.map(startOfLesson => {\n                const hm = startOfLesson.split(':');\n                return new Date().setHours(parseInt(hm[0]), parseInt(hm[1]));\n            }).map((startOfLesson, idx) => <HeaderSlotComponent lessonIdx={idx} startOfLesson={startOfLesson} key={startOfLesson.toString() + idx.toString()} />)}\n        </div>\n    </>;\n});\n\n\nexport default TimetableHeaderComponent;","import { createAction } from 'typesafe-actions';\n\nexport const nextWeek = createAction('NEXT_WEEK')<void>();\n\nexport const previousWeek = createAction('PREVIOUS_WEEK')<void>();\n\nexport const setDate = createAction('SET_DATE')<number>();\n\nexport const dateChanged = createAction('DATE_CHANGED')<void>();","import { LoadSubstitutionsAsyncSuccessPayload } from \"ApiModel\";\nimport { createAction, createAsyncAction } from \"typesafe-actions\";\n\n\nexport const loadSubstitutionsAsync = createAsyncAction(\n    'LOAD_SUBSTITUTIONS_REQUEST',\n    'LOAD_SUBSTITUTIONS_SUCCESS',\n    'LOAD_SUBSTITUTIONS_FAILURE'\n)<string, LoadSubstitutionsAsyncSuccessPayload, string>();\n\nexport const substitutionLoadingComplete = createAction('SUBSTITUTIONS_LOAD_COMPLETE')<void>();","import { Box, Button, IconButton, makeStyles } from \"@material-ui/core\";\nimport React, { FunctionComponent } from \"react\";\nimport { nextWeek, previousWeek, setDate } from \"../../../store/date/actions\";\nimport ArrowForwardIosIcon from '@material-ui/icons/ArrowForwardIos';\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport { connect } from \"react-redux\";\n\nconst useStyles = makeStyles((theme) => ({\n    textWrapper: {\n        height: '4vh',\n        width: '100%'\n    },\n    textSection: {\n        float: 'left',\n        height: 'inherit',\n        margin: theme.spacing(1),\n    },\n    switchViewsButton: {\n        float: 'right',\n        height: 'inherit',\n        margin: theme.spacing(1),\n    },\n}));\n\nconst dispatchProps = {\n    nextWeek: nextWeek,\n    prevWeek: previousWeek,\n    setDate: setDate,\n};\n\ntype NavbarOwnProps = {\n    navigationButtonText: string,\n    onNavButtonClick: () => void;\n};\n\ntype NavbarProps = NavbarOwnProps & typeof dispatchProps;\n\nconst Navbar: FunctionComponent<NavbarProps> = ({ navigationButtonText, onNavButtonClick, nextWeek, prevWeek, setDate }) => {\n    const cssStyleClasses = useStyles();\n\n    return <Box className={cssStyleClasses.textWrapper}>\n        <Box className={cssStyleClasses.textSection}>\n            <IconButton size=\"small\" onClick={() => prevWeek()}>\n                <ArrowBackIosIcon fontSize=\"small\"></ArrowBackIosIcon>\n            </IconButton>\n            <Button size=\"small\" variant=\"outlined\" onClick={() => setDate(0)}>Dzisiaj</Button>\n\n            <IconButton size=\"small\" onClick={() => nextWeek()}>\n                <ArrowForwardIosIcon fontSize=\"small\"></ArrowForwardIosIcon>\n            </IconButton>\n        </Box>\n\n        <Box className={cssStyleClasses.switchViewsButton}>\n            <IconButton size=\"small\" style={{ visibility: \"hidden\" }}>\n                <ArrowForwardIosIcon fontSize=\"small\"></ArrowForwardIosIcon>\n            </IconButton>\n            <Button size=\"small\" variant=\"outlined\" onClick={onNavButtonClick}>{navigationButtonText}</Button>\n        </Box>\n    </Box>;\n}\n\nexport default connect(null, dispatchProps)(Navbar);","import { Box, makeStyles, Typography } from \"@material-ui/core\";\nimport { eachDayOfInterval, format } from \"date-fns\";\nimport { endOfWeek, startOfWeek } from \"date-fns/esm\";\nimport React, { FunctionComponent, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { RootState } from \"typesafe-actions\";\nimport { loadClassesAsync } from \"../../../store/classes/actions\";\nimport { loadScheduleAsync } from \"../../../store/schedule/actions\";\nimport DayTimetableComponent from \"./dayTimetable/DayTimetableComponent\";\nimport TimetableHeaderComponent from \"./timetableHeader/TimetableHeaderComponent\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport { setClass } from \"../../../store/preferences/actions\";\nimport { pl } from \"date-fns/locale\";\nimport { filteredTimetable, getTimetableSize } from \"../../../store/root-selectors\";\nimport { nextWeek, previousWeek, setDate } from \"../../../store/date/actions\";\nimport { loadSubstitutionsAsync } from \"../../../store/substitutions/actions\";\nimport { GetCurrentDateInPoland } from \"../../../utils/time-utils\";\nimport Navbar from \"../navbar/Navbar\";\n\nconst useStyles = makeStyles((theme) => ({\n    textWrapper: {\n        height: '4vh',\n        width: '100%'\n    },\n    textSection: {\n        float: 'left',\n        height: 'inherit',\n        margin: theme.spacing(1),\n    },\n    switchViewsButton: {\n        float: 'right',\n        height: 'inherit',\n        margin: theme.spacing(1),\n    },\n    filterAlert: {\n        width: '30vw',\n        overflow: 'hidden',\n        whiteSpace: 'nowrap',\n        textOverflow: 'elipsis',\n        height: 'inherit',\n    },\n    timetableWrapper: {\n        display: 'grid',\n        gridAutoFlow: 'rows',\n        gridTemplateColumns: '7vw 90vw',\n        gridTemplateRows: '5vh repeat(5, 15vh)',\n        rowGap: '1px',\n        margin: theme.spacing(2, 1, 2, 1),\n    },\n    skeletonStyle: {\n        transform: 'scale(1, 0.95)',\n        gridColumn: '2 / 3',\n    },\n}));\n\nconst mapStateToProps = (state: RootState) => ({\n    timetableStatus: state.schedule.isLoadingSchedule,\n    timetable: state.schedule.schedule,\n    timetableSize: getTimetableSize(state),\n    filteredTimetable: filteredTimetable(state),\n});\n\nconst dispatchProps = {\n    loadTimetable: loadScheduleAsync.request,\n    loadClasses: loadClassesAsync.request,\n    loadSubstitutions: loadSubstitutionsAsync.request,\n    setClass: setClass,\n    nextWeek: nextWeek,\n    prevWeek: previousWeek,\n    setDate: setDate,\n}\n\ntype ScheduleParams = {\n    classParam: string,\n}\n\ntype ScheduleProps = ReturnType<typeof mapStateToProps> & typeof dispatchProps;\n\nconst TimetableComponent: FunctionComponent<ScheduleProps> = ({ timetableStatus, filteredTimetable, setClass }) => {\n    const cssStyleClasses = useStyles();\n    const classParam = useParams<ScheduleParams>().classParam;\n    let history = useHistory();\n\n    useEffect(() => { setClass(classParam); }, [setClass, classParam]);\n\n    const today = GetCurrentDateInPoland();\n    const daysInCurrentWeek: Date[] = eachDayOfInterval({\n        start: startOfWeek(today, { weekStartsOn: 1 }),\n        end: endOfWeek(today, { weekStartsOn: 1 }),\n    });\n    const onNavButtonClick = () => {\n        history.push(`/substitutions/${classParam}`);\n    };\n    return <>\n        <Navbar navigationButtonText=\"Zastępstwa\" onNavButtonClick={onNavButtonClick} />\n        <Box className={cssStyleClasses.timetableWrapper}>\n            <TimetableHeaderComponent />\n            {timetableStatus.loading\n                ? Array.from(Array(5).keys()).map((idx) => <>\n                    <div style={{ textOverflow: 'ellipsis', overflow: 'hidden', whiteSpace: 'nowrap' }}>\n                        {format(daysInCurrentWeek[idx], \"iii\", { locale: pl })}\n                    </div>\n                    <Skeleton className={cssStyleClasses.skeletonStyle} animation=\"wave\" key={\"skeleton\" + idx.toString()} />\n                </>)\n                : timetableStatus.error ?\n                    <>\n                        <ErrorIcon color=\"error\" />\n                        <Typography variant=\"h6\" color=\"error\">\n                            Wystąpił błąd podczas ładowania rozkładu. Odśwież stronę.\n                    </Typography>\n                    </>\n                    : Array.from(Array(5).keys()).map(dayIdx => <DayTimetableComponent dayTimetable={filteredTimetable[dayIdx]} dayIdx={dayIdx} currentWeekInterval={daysInCurrentWeek} key={dayIdx.toString()} />)\n            }\n        </Box>\n    </>;\n}\n\n\nexport default connect(mapStateToProps, dispatchProps)(TimetableComponent);","import { Box, Divider, List, ListItem, ListItemText, makeStyles } from \"@material-ui/core\";\nimport { Substitution } from \"ApiModel\";\nimport { format } from \"date-fns\";\nimport { pl } from \"date-fns/locale\";\nimport React, { FunctionComponent } from \"react\";\nimport { capitalizeFirstLetter } from \"../../../utils/string-uitls\";\n\nconst useStyles = makeStyles((theme) => ({\n    inline: {\n        display: 'inline',\n    },\n    subBlock1: {\n        margin: theme.spacing(0.2),\n        // font: \"bold\",\n    },\n    subBlock2: {\n        margin: theme.spacing(0.2),\n    },\n    singleBlock: {\n        // backgroundColor: theme.palette.background.paper,\n        margin: theme.spacing(1),\n        padding: theme.spacing(0.2),\n    }\n}));\n\ntype SingleDaySubstitutionOwnProps = {\n    dayOfWeek: Date,\n    substitution: Substitution[],\n};\n\ntype SingleDaySubstitutionProps = SingleDaySubstitutionOwnProps;\n\nconst SingleDaySubstitutionComponent: FunctionComponent<SingleDaySubstitutionProps> = ({ dayOfWeek, substitution }) => {\n    const cssStyleClasses = useStyles();\n\n    const formattedDate = capitalizeFirstLetter(format(dayOfWeek, 'cccc - dd MMM', { locale: pl }));\n    console.log(`hey lad ${substitution}`);\n    return <>\n        <ListItem alignItems=\"flex-start\">\n            <ListItemText\n                primary={formattedDate}\n                secondary={\n                    <List>\n                        {(substitution && substitution.length > 0) ? substitution.map(sub =>\n                            <ListItem>\n                                <ListItemText className={cssStyleClasses.singleBlock}>\n                                    <Box className={cssStyleClasses.subBlock1}>Lekcja {sub.time_signature}</Box>\n                                    <Box className={cssStyleClasses.subBlock2}>{sub.comment}</Box>\n                                </ListItemText>\n                            </ListItem>\n                        ) : <ListItem><ListItemText>Brak zastępstw</ListItemText></ListItem>}\n                    </List>\n                }\n            />\n        </ListItem>\n        <Divider variant=\"inset\" component=\"li\" /></>;\n}\n\nexport default SingleDaySubstitutionComponent;","import { List, makeStyles, Typography } from \"@material-ui/core\";\nimport { addWeeks, eachDayOfInterval, endOfWeek, startOfWeek } from \"date-fns\";\nimport React, { FunctionComponent, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { RootState } from \"typesafe-actions\";\nimport { setClass } from \"../../../store/preferences/actions\";\nimport { GetCurrentDateInPoland } from \"../../../utils/time-utils\";\nimport Navbar from \"../navbar/Navbar\";\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport SingleDaySubstitutionComponent from \"./SingleDaySubstitutionComponent\";\nimport ErrorIcon from '@material-ui/icons/Error';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    },\n    inline: {\n        display: 'inline',\n    },\n    skeletonStyle: {\n        transform: 'scale(1, 0.95)',\n        gridColumn: '2 / 3',\n    },\n}));\n\n\nconst mapStateToProps = (state: RootState) => ({\n    substitutions: state.substitutions.substitutions,\n    substitutionsStatus: state.substitutions.isLoadingSubstitutions,\n    currentDateOffset: state.date,\n})\n\nconst dispatchProps = {\n    setClass: setClass,\n};\n\ntype SubstitutionsParams = {\n    classParam: string,\n};\n\ntype SubstitutionsComponentProps = ReturnType<typeof mapStateToProps> & typeof dispatchProps;\n\nconst SubstitutionsComponent: FunctionComponent<SubstitutionsComponentProps> = ({ substitutions, substitutionsStatus, currentDateOffset, setClass }) => {\n    const currentDate = addWeeks(GetCurrentDateInPoland(), currentDateOffset);\n    const currentStartOfWeek = startOfWeek(currentDate, { weekStartsOn: 1 });\n    const currentEndOfWeek = endOfWeek(currentDate, { weekStartsOn: 1 });\n    const daysInWeek = eachDayOfInterval({\n        start: currentStartOfWeek,\n        end: currentEndOfWeek\n    });\n\n\n    const cssStyleClasses = useStyles();\n    const classParam = useParams<SubstitutionsParams>().classParam;\n    let history = useHistory();\n    useEffect(() => { setClass(classParam); }, [setClass, classParam]);\n\n    if (substitutionsStatus.error) {\n        return <>\n            <ErrorIcon color=\"error\" />\n            <Typography variant=\"h6\" color=\"error\">\n                Wystąpił błąd podczas ładowania rozkładu. Odśwież stronę.\n                    </Typography>\n        </>;\n    }\n\n    const onNavButtonClick = () => {\n        history.push(`/timetable/${classParam}`);\n    };\n    return <>\n        <Navbar navigationButtonText=\"Plan lekcji\" onNavButtonClick={onNavButtonClick} />\n\n        <List className={cssStyleClasses.root}>\n            {daysInWeek.filter((_, idx) => idx < 5).map((currDay, idx) => {\n                if (substitutionsStatus.loading < 7) {\n                    return <Skeleton className={cssStyleClasses.skeletonStyle} animation=\"wave\" key={\"skeleton\" + idx.toString()} />;\n                }\n                console.log(substitutions[idx]);\n                console.log(idx)\n                return <SingleDaySubstitutionComponent dayOfWeek={currDay} substitution={substitutions[idx]} />;\n            })}\n        </List>\n    </>;\n}\n\nexport default connect(mapStateToProps, dispatchProps)(SubstitutionsComponent);","import { createMuiTheme, CssBaseline, Theme, ThemeProvider } from \"@material-ui/core\";\nimport React, { FunctionComponent } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Switch,\n  Route,\n  HashRouter,\n  Redirect\n} from \"react-router-dom\";\nimport { RootState } from \"typesafe-actions\";\nimport PageFooterComponent from \"./components/PageFooterComponent\";\nimport PageHeaderComponent from \"./components/PageHeaderComponent\";\nimport TimetableComponent from \"./components/mainPage/timetable/TimetableComponent\";\nimport { setTheme } from \"./store/preferences/actions\";\nimport SubstitutionsComponent from \"./components/mainPage/substitutions/SubstitutionsComponent\";\n\nconst mapStateToProps = (state: RootState) => ({\n  preferences: state.preferences\n});\n\nconst dispatchProps = {\n  setTheme: setTheme,\n};\n\ntype AppProps = ReturnType<typeof mapStateToProps> & typeof dispatchProps;\ntype ThemeType = 'dark' | 'light';\n\nconst App: FunctionComponent<AppProps> = ({ preferences, setTheme }) => {\n  const preferredTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';\n  console.log(preferredTheme);\n  if (preferences.theme === \"\") {\n    setTheme(preferredTheme);\n  }\n\n  const computedTheme = preferences.theme === \"\" ? preferredTheme : preferences.theme;\n\n  const theme: Theme = React.useMemo(() => createMuiTheme({\n    palette: {\n      type: (computedTheme as ThemeType),\n    },\n    overrides: {\n      MuiCssBaseline: {\n        '@global': {\n          body: {\n            '-webkit-text-size-adjust': 'none',\n            'text-size-adjust': 'none',\n            '-moz-text-size-adjust': 'none',\n            '-ms-text-size-adjuist': 'none',\n          },\n          '*': {\n            '--scrollbarBG': '#CFD8DC',\n            '--thumbBG': '#90A4AE',\n            scrollbarWidth: 'thin',\n            scrollbarColor: 'var(--thumbBG) var(--scrollbarBG)',\n          },\n          '*::-webkit-scrollbar': {\n            width: '11px',\n          },\n          '*::-webkit-scrollbar-track': {\n            background: 'var(--scrollbarBG)',\n          },\n          '*::-webkit-scrollbar-thumb': {\n            backgroundColor: 'var(--thumbBG)',\n            bordeRadius: '6px',\n            border: '3px solid var(--scrollbarBG)',\n          },\n        },\n      },\n    }\n  }), [computedTheme]);\n\n  theme.typography.caption = {\n    [theme.breakpoints.down('sm')]: {\n      fontSize: '60%',\n    }\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <HashRouter>\n        <Switch>\n          <Route path=\"/timetable/:classParam\">\n            <div style={{ display: 'flex', flexDirection: 'column', height: '100vh' }}>\n              <div style={{ flex: \"1 0 auto\" }}>\n                <PageHeaderComponent />\n                <TimetableComponent />\n              </div>\n              <PageFooterComponent />\n            </div>\n          </Route>\n          <Route path=\"/substitutions/:classParam\">\n            <div style={{ display: 'flex', flexDirection: 'column', height: '100vh' }}>\n              <div style={{ flex: \"1 0 auto\" }}>\n                <PageHeaderComponent />\n                <SubstitutionsComponent />\n              </div>\n              <PageFooterComponent />\n            </div>\n          </Route>\n          <Route path=\"/\">\n            <Redirect to=\"/timetable/1A\" />\n          </Route>\n        </Switch>\n      </HashRouter>\n    </ThemeProvider >\n  );\n}\n\nexport default connect(mapStateToProps, dispatchProps)(App);\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers } from 'redux';\nimport { GroupFilter, ScheduleStatus, WeekSchedule } from \"ApiModel\";\nimport { createReducer } from 'typesafe-actions';\nimport { createGroupsAction, loadScheduleAsync } from \"./actions\";\n\nexport const isLoadingSchedule = createReducer({ loading: true, error: false } as ScheduleStatus)\n    .handleAction(loadScheduleAsync.request, () => ({ loading: true, error: false } as ScheduleStatus))\n    .handleAction(loadScheduleAsync.failure, () => ({ loading: false, error: true } as ScheduleStatus))\n    .handleAction(loadScheduleAsync.success, (state, action) => {\n        return { loading: false, error: !action.payload.success } as ScheduleStatus;\n    });\n\nexport const schedule = createReducer([] as WeekSchedule)\n    .handleAction(loadScheduleAsync.success, (state, action) => action.payload.resp ? action.payload.resp : []);\n\n// TODO(pawelp): do this using selectors instead. Preferably memoized one like reselect. \nexport const groups = createReducer({} as GroupFilter)\n    .handleAction(createGroupsAction, (state, action) => {\n        return { ...action.payload };\n    });\n\nconst scheduleReducer = combineReducers({\n    isLoadingSchedule,\n    schedule,\n    groups,\n});\n\nexport default scheduleReducer;\nexport type ScheduleState = ReturnType<typeof scheduleReducer>;","import { loadClassesAsync } from './actions';\nimport { combineReducers } from 'redux';\nimport { ClassesStatus } from \"ApiModel\";\nimport { createReducer } from 'typesafe-actions';\n\nexport const isLoadingClasses = createReducer({ loading: true, error: false } as ClassesStatus)\n    .handleAction(loadClassesAsync.request, () => ({ loading: true, error: false } as ClassesStatus))\n    .handleAction(loadClassesAsync.failure, () => ({ loading: false, error: true } as ClassesStatus))\n    .handleAction(loadClassesAsync.success, (state, action) => {\n        return { loading: false, error: !action.payload.success } as ClassesStatus;\n    });\n\nexport const classes = createReducer([] as string[])\n    .handleAction(loadClassesAsync.success, (state, action) => action.payload.resp ? action.payload.resp : []);\n\nconst classesReducer = combineReducers({\n    isLoadingClasses,\n    classes,\n});\n\nexport default classesReducer;\nexport type ClassesState = ReturnType<typeof classesReducer>;","import { createGroupsAction } from './../schedule/actions';\nimport storage from 'redux-persist/lib/storage';\nimport { addGroup, removeGroup, setTheme, updateClass } from './actions';\nimport { createReducer } from 'typesafe-actions';\nimport { persistCombineReducers } from 'redux-persist';\nimport { GroupFiltersByClass } from 'ApiModel';\n\n\nexport const themeReducer = createReducer('')\n    .handleAction(setTheme, (state, action) => {\n        return action.payload;\n    });\n\nexport const classReducer = createReducer('')\n    .handleAction(updateClass, (state, action) => {\n        return action.payload;\n    });\n\nexport const groupFiltersReducer = createReducer({} as GroupFiltersByClass)\n    .handleAction(createGroupsAction, (state, action) => {\n        /// TODO(pawelp): this should be more clever. In particular, we'll miss groups in new show up and have groups left\n        // behind if some groups get removed.\n        const newState = state;\n        if (!newState[action.meta]) {\n            newState[action.meta] = action.payload;\n        }\n        return { ...newState };\n    })\n    .handleAction(addGroup, (state, action) => {\n        const newState = state;\n        newState[action.meta][action.payload.subject].push(action.payload);\n        const newGroupsForCurrentClass = newState[action.meta];\n        delete newState[action.meta];\n\n        return {\n            ...newState,\n            [action.meta]: {\n                ...newGroupsForCurrentClass,\n            },\n        };\n    })\n    .handleAction(removeGroup, (state, action) => {\n        const newState = state;\n\n        newState[action.meta][action.payload.subject] = newState[action.meta][action.payload.subject].filter(val => val.group !== action.payload.group);\n        const newGroupsForCurrentClass = newState[action.meta];\n        delete newState[action.meta];\n\n        return {\n            ...newState,\n            [action.meta]: {\n                ...newGroupsForCurrentClass,\n            },\n        };\n    });\n\nconst persistConfig = {\n    key: 'preferences',\n    storage,\n    blacklist: ['class'],\n}\n\nconst preferencesReducer = persistCombineReducers(persistConfig, {\n    theme: themeReducer,\n    class: classReducer,\n    groupFilters: groupFiltersReducer,\n});\n\nexport default preferencesReducer;\nexport type PreferencesState = ReturnType<typeof preferencesReducer>;","import { nextWeek, previousWeek, setDate } from './actions';\nimport { createReducer } from 'typesafe-actions';\n\n\nexport const dateReducer = createReducer(0)\n    .handleAction(nextWeek, (state, action) => state + 1)\n    .handleAction(previousWeek, (state, action) => state - 1)\n    .handleAction(setDate, (state, action) => action.payload);\n\n\nexport default dateReducer;\nexport type DateState = ReturnType<typeof dateReducer>","import { combineReducers } from 'redux';\nimport { SubstitutionsStatus, Substitution, WeekSubstitutions } from \"ApiModel\";\nimport { createReducer } from 'typesafe-actions';\nimport { loadSubstitutionsAsync } from './actions';\n\nexport const isLoadingSubstitutions = createReducer({ loading: 0, error: false } as SubstitutionsStatus)\n    .handleAction(loadSubstitutionsAsync.request, () => ({ loading: 0, error: false } as SubstitutionsStatus))\n    .handleAction(loadSubstitutionsAsync.failure, () => ({ loading: 0, error: true } as SubstitutionsStatus))\n    .handleAction(loadSubstitutionsAsync.success, (state, action) => {\n        // if any request errored out, return error state\n        // TODO(pawel): this can be handled better, maybe?\n        if (state.error) return state;\n        return { loading: state.loading + 1, error: false } as SubstitutionsStatus;\n    });\n\nexport const substitutions = createReducer(Array<Substitution[]>(7) as WeekSubstitutions)\n    .handleAction(loadSubstitutionsAsync.success, (state, action) => {\n        console.log(action);\n        state[action.payload.dayOfWeek] = action.payload.response;\n        return { ...state };\n    });\n\nconst substitutionsReducer = combineReducers({\n    isLoadingSubstitutions,\n    substitutions,\n});\n\nexport default substitutionsReducer;\nexport type SubstitutionsState = ReturnType<typeof substitutionsReducer>;\n","import scheduleReducer from './schedule/reducer';\nimport classesReducer from './classes/reducer';\nimport preferencesReducer from './preferences/reducer';\nimport dateReducer from './date/reducer';\nimport { combineReducers } from 'redux';\nimport substitutionsReducer from './substitutions/reducer';\n\nconst rootReducer = combineReducers({\n  schedule: scheduleReducer,\n  classes: classesReducer,\n  preferences: preferencesReducer,\n  date: dateReducer,\n  substitutions: substitutionsReducer,\n});\n\nexport default rootReducer;\n","import { updateClass } from './../preferences/actions';\nimport { dateChanged } from './../date/actions';\nimport { loadScheduleAsync, createGroupsAction } from './actions';\nimport { Epic } from 'redux-observable';\nimport { RootAction, RootState, Services, isActionOf } from 'typesafe-actions';\nimport { from, of } from 'rxjs';\nimport { filter, switchMap, catchError, concatMap, withLatestFrom, map } from 'rxjs/operators';\nimport { GetScheduleResponse, GroupFilter } from 'ApiModel';\n\nexport const loadScheduleEpic: Epic<\n    RootAction,\n    RootAction,\n    RootState,\n    Services\n> = (action$, state$, { api }) => action$.pipe(\n    filter(isActionOf(loadScheduleAsync.request)),\n    withLatestFrom(state$),\n    switchMap(([action, state]) =>\n        from(api.schedule.getSchedule(action.payload, state.date)).pipe(\n            concatMap((response) => from([createGroupsAction(transformTimetableResponse(response), state.preferences.class), loadScheduleAsync.success(response)])),\n            catchError((message: string) => of(loadScheduleAsync.failure(message)))\n        )\n    )\n);\n\nexport const onDateChanged: Epic<\n    RootAction,\n    RootAction,\n    RootState\n> = (action$, state$) => action$.pipe(\n    filter(isActionOf(dateChanged)),\n    withLatestFrom(state$),\n    map(([_, state]) => loadScheduleAsync.request(state.preferences.class))\n);\n\nexport const onClassChanged: Epic<\n    RootAction,\n    RootAction,\n    RootState\n> = (action$, state$) => action$.pipe(\n    filter(isActionOf(updateClass)),\n    withLatestFrom(state$),\n    switchMap(([, state]) => of(loadScheduleAsync.request(state.preferences.class))\n    )\n);\n\nfunction transformTimetableResponse(response: GetScheduleResponse): GroupFilter {\n    console.time('transformTimetableResponse');\n    const newFilters = {} as GroupFilter;\n    // TODO: (pawelp) remodel handling of error so that we map `success = false` to error at service level\n    if (!response.success) return newFilters;\n\n    response.resp.flat().flat().forEach(cl => {\n        if (!newFilters[cl.subject] && cl.group !== \"\") {\n            newFilters[cl.subject] = [];\n        }\n        if (cl.group !== \"\" && !newFilters[cl.subject].find(lesson => lesson.group === cl.group)) {\n            newFilters[cl.subject].push(cl);\n        }\n    });\n    // Object.values(newFilters).forEach(arr => arr.sort((a, b) => a.group.localeCompare(b.group)));\n    console.timeEnd('transformTimetableResponse');\n    return newFilters;\n}\n\n","import { loadClassesAsync } from './actions';\nimport { Epic } from \"redux-observable\";\nimport { catchError, filter, map, switchMap } from \"rxjs/operators\";\nimport { isActionOf, RootAction, RootState, Services } from \"typesafe-actions\";\nimport { from, of } from 'rxjs';\n\nexport const loadClassesEpic: Epic<\n    RootAction,\n    RootAction,\n    RootState,\n    Services\n> = (action$, state$, { api }) => action$.pipe(\n    filter(isActionOf(loadClassesAsync.request)),\n    switchMap(() =>\n        from(api.schedule.getClasses()).pipe(\n            map(loadClassesAsync.success),\n            catchError((message: string) => of(loadClassesAsync.failure(message))\n            )\n        )\n    )\n);","import { nextWeek, previousWeek, setDate, dateChanged } from './actions';\nimport { isActionOf, RootState } from 'typesafe-actions';\nimport { RootAction } from 'typesafe-actions';\nimport { filter, mapTo } from 'rxjs/operators';\nimport { Epic } from 'redux-observable';\n\n\nexport const nextWeekEpic: Epic<\n    RootAction,\n    RootAction,\n    RootState> = (action$, state$) =>\n        action$.pipe(\n            filter(isActionOf([nextWeek, previousWeek, setDate])),\n            mapTo(dateChanged())\n        );","import { updateClass } from './../preferences/actions';\nimport { differenceInCalendarDays, eachDayOfInterval } from 'date-fns';\nimport { endOfWeek } from 'date-fns';\nimport { loadSubstitutionsAsync } from './actions';\nimport { Epic } from 'redux-observable';\nimport { RootAction, RootState, Services, isActionOf } from 'typesafe-actions';\nimport { from, of } from 'rxjs';\nimport { filter, catchError, mergeMap, withLatestFrom, map, mergeAll, switchMap } from 'rxjs/operators';\nimport { addWeeks, startOfWeek } from 'date-fns';\nimport { pl } from 'date-fns/locale';\nimport { dateChanged } from '../date/actions';\nimport { GetCurrentDateInPoland } from '../../utils/time-utils';\n\nexport const loadSubstitutionsEpic: Epic<\n    RootAction,\n    RootAction,\n    RootState,\n    Services\n> = (action$, state$, { api }) => action$.pipe(\n    filter(isActionOf(loadSubstitutionsAsync.request)),\n    withLatestFrom(state$),\n    mergeMap(([action, state]) =>\n        GetSubstitutionsRequestsForCurrentWeek({ api }, action.payload, state.date)\n    ),\n    mergeAll(),\n);\n\nexport const onDateChanged: Epic<\n    RootAction,\n    RootAction,\n    RootState\n> = (action$, state$) => action$.pipe(\n    filter(isActionOf(dateChanged)),\n    withLatestFrom(state$),\n    map(([_, state]) => loadSubstitutionsAsync.request(state.preferences.class))\n);\n\nexport const onClassChanged: Epic<\n    RootAction,\n    RootAction,\n    RootState\n> = (action$, state$) => action$.pipe(\n    filter(isActionOf(updateClass)),\n    withLatestFrom(state$),\n    switchMap(([, state]) => of(loadSubstitutionsAsync.request(state.preferences.class)))\n);\n\nfunction GetSubstitutionsRequestsForCurrentWeek({ api }: Services, classParam: string, weekOffset: number) {\n    const dayFromDestinationWeek = addWeeks(GetCurrentDateInPoland(), weekOffset);\n    console.log(`base day: ${dayFromDestinationWeek}`);\n    const firstDayOfWeek = startOfWeek(dayFromDestinationWeek, { locale: pl, weekStartsOn: 1 });\n    const lastDayOfWeek = endOfWeek(dayFromDestinationWeek, { locale: pl, weekStartsOn: 1 });\n    const daysInWeek = eachDayOfInterval({\n        start: firstDayOfWeek,\n        end: lastDayOfWeek\n    });\n    console.log(daysInWeek);\n    console.log(daysInWeek.map(day => differenceInCalendarDays(day, GetCurrentDateInPoland())));\n    const reqPromises = daysInWeek.map(day => differenceInCalendarDays(day, GetCurrentDateInPoland())).map(offset => api.schedule.getSubstitutions(classParam, offset));\n\n    const reqObservables = reqPromises.map((req, idx) => from(req).pipe(\n        map(resp => loadSubstitutionsAsync.success({ response: resp, dayOfWeek: idx })),\n        catchError((message: string) => of(loadSubstitutionsAsync.failure(message))),\n    ));\n    return reqObservables;\n}","import { setClass, updateClass } from './actions';\nimport { Epic } from \"redux-observable\";\nimport { filter, switchMap, withLatestFrom } from \"rxjs/operators\";\nimport { isActionOf, RootAction, RootState } from \"typesafe-actions\";\nimport { EMPTY, iif, of } from 'rxjs';\n\n\n// We trigger load schedule and load substitutions whenever the class changes.\n// Those two actions wait for updateClass action so make sure it's triggered only when\n// we actually change class.\nexport const updateClassEpic: Epic<\n    RootAction,\n    RootAction,\n    RootState> = (action$, state$) =>\n        action$.pipe(\n            filter(isActionOf(setClass)),\n            withLatestFrom(state$),\n            switchMap(([action, state]) =>\n                iif(() => action.payload !== state.preferences.class,\n                    of(updateClass(action.payload)),\n                    EMPTY)\n            )\n        );","import { combineEpics } from 'redux-observable';\n\nimport * as scheduleEpics from './schedule/epics';\nimport * as classesEpics from './classes/epics';\nimport * as dateEpics from './date/epics';\nimport * as substitutionsEpics from './substitutions/epics';\nimport * as preferencesEpics from './preferences/epics';\n\nexport default combineEpics(\n    ...Object.values(scheduleEpics),\n    ...Object.values(classesEpics),\n    ...Object.values(dateEpics),\n    ...Object.values(preferencesEpics),\n    ...Object.values(substitutionsEpics),\n);\n","import { GetScheduleResponse, GetClassesResponse, Substitution } from \"ApiModel\";\n\n\nexport function getSchedule(classParam: string, offset = 0): Promise<GetScheduleResponse> {\n    console.log(`got class param ${classParam} offset: ${offset}`);\n    return fetch(`https://api.cld.sh/v1/vlo/ttdata/${classParam}?offset=${offset}`)\n        .then(response => response.json())\n        .then(function (a) { return { success: true, resp: a } });\n}\n// TODO(cloud11665) fix this hackjob\nexport function getClasses(): Promise<GetClassesResponse> {\n    return fetch(`https://api.cld.sh/v1/vlo/listclass`)\n        .then(response => response.json())\n        .then(function (a) { return { success: true, resp: a } });\n}\n\nexport function getSubstitutions(classParam: string, offset = 0): Promise<Substitution[]> {\n    return fetch(`https://api.cld.sh/v1/vlo/substitutions/${classParam}?offset=${offset}`)\n        .then(response => response.json());\n};\n","import * as schedule from './schedule-api';\n\nconst apis = {\n    api: {\n        schedule,\n    },\n};\n\nexport default apis;","import { createStore, applyMiddleware } from 'redux';\nimport { createEpicMiddleware } from 'redux-observable';\nimport { RootAction, RootState, Services } from 'typesafe-actions';\n\nimport rootReducer from './root-reducer';\nimport rootEpic from './root-epic';\nimport services from '../services';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nexport const epicMiddleware = createEpicMiddleware<\n  RootAction,\n  RootAction,\n  RootState,\n  Services\n>({\n  dependencies: services,\n});\n\n// configure middlewares\nconst middlewares = [epicMiddleware];\n// compose enhancers\nconst enhancer = composeWithDevTools(applyMiddleware(...middlewares));\n\n// rehydrate state on app start\n// const initialState = {};\n\n// create store\nconst store = createStore(rootReducer, enhancer);\nepicMiddleware.run(rootEpic);\n\n// export store singleton instance\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { persistStore } from 'redux-persist';\nimport { CircularProgress } from '@material-ui/core';\n\nconst persistor = persistStore(store);\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={<CircularProgress />} persistor={persistor}>\n        <App />\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}