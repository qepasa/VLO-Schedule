(this["webpackJsonpvlo-schedule"]=this["webpackJsonpvlo-schedule"]||[]).push([[0],{116:function(e,t,r){},123:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"loadScheduleEpic",(function(){return xe}));var c={};r.r(c),r.d(c,"getSchedule",(function(){return me}));var o=r(2),a=r(0),i=r.n(a),s=r(14),l=r.n(s),d=(r(116),r(45)),j=r(13),u=r(142),b=r(143),h=r(59),O=Object(u.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:{margin:e.spacing(1),flex:1}}})),p=function(){var e=O(),t=Object(j.f)().classParam;return Object(o.jsx)(b.a,{className:e.toolbar,children:Object(o.jsxs)(h.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:e.toolbarTitle,children:["Rozk\u0142ad klasy ",t]})})},f=r(164),x=r(154),v=r(155),m=r(156),g=r(80),y=r(44),w=Object(y.createAsyncAction)("LOAD_SCHEDULE_REQUEST","LOAD_SCHEDULE_SUCCESS","LOAD_SCHEDULE_FAILURE")(),S=r(84),A=r(58),C=r(162);function k(e,t){return t>e?k(t,e):0==t?e:k(t,e%t)}function _(e){if(0==e.length)throw Error("You need to pass at least one number!");if(1==e.length)return e[0];if(2==e.length)return e[0]*e[1]/k(e[0],e[1]);var t=e.pop(),r=_(e);return t*r/k(t,r)}var E=r(85),B=r(39),I=r.n(B),R=r(145),T=r(163),z=r(146),D=r(147),L=r(148),F=r(167),H=r(149),G=r(150),W=r(151),M=r(152),N=function(e){var t=e.lessons,r=e.lessonNumber,n=e.onClose,c=e.open,a=function(){n()};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(R.a,{}),Object(o.jsxs)(T.a,{onClose:a,"aria-labelledby":"lessons-list-dialog",open:c,fullWidth:!0,children:[Object(o.jsxs)(z.a,{id:"lessons-list-dialog-title",children:["Lekcja ",r]}),Object(o.jsx)(D.a,{children:Object(o.jsx)(L.a,{children:t.map((function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(F.a,{children:Object(o.jsx)(H.a,{primary:"".concat(e.subject).concat(e.group?" - "+e.group:""),secondary:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:["Nauczyciel: ",e.teacher]}),Object(o.jsxs)("div",{children:["Sala: ",e.classroom]})]})})},e.subject+e.teacher+e.color),Object(o.jsx)(G.a,{variant:"inset",component:"li"})]})}))})}),Object(o.jsx)(W.a,{children:Object(o.jsx)(M.a,{onClick:a,color:"primary",children:"Zamknij"})})]})]})},P=function(e){var t=e.lesson,r=e.height,n=e.lessonsByHour,c=I()(),i=c.fontSize,s=c.ref,l=Object(a.useState)(!1),d=Object(E.a)(l,2),j=d[0],u=d[1],b=Object(a.useState)([]),h=Object(E.a)(b,2),O=h[0],p=h[1],f=Object(a.useState)(0),x=Object(E.a)(f,2),v=x[0],m=x[1];return Object(o.jsxs)("div",{style:{fontSize:i,height:r,overflow:"hidden"},ref:s,onClick:function(e){var r=e.currentTarget.getBoundingClientRect();console.log(e),console.log(r),console.log(e.pageX);var c=(e.pageX-r.left)/(r.right-r.left);console.log(c);var o=1/t.duration,a=Math.floor(c/o);console.log(a),(e.target===s.current||e.target instanceof Node&&s.current.contains(e.target))&&(p(n[t.time_index+a]),m(t.time_index+a),u(!0))},children:[Object(o.jsxs)("div",{style:{textAlign:"left"},children:[t.subject," ",t.group]}),Object(o.jsx)("div",{style:{textAlign:"center"},children:t.teacher}),Object(o.jsx)("div",{style:{textAlign:"right"},children:t.classroom}),Object(o.jsx)(N,{lessons:O,lessonNumber:v,onClose:function(){u(!1)},open:j})]})},U=r(165);function q(e,t){var r=Array(11).fill(0);console.log(t);for(var n=0;n<11;++n)r[n]=t[n].length;console.log(r);var c,o=_(r.filter((function(e){return 0!=e}))),a=e.map((function(e){var t=e.map((function(e){return e}));return t.sort((function(e,t){var r=e.time_index+e.duration-1,n=t.time_index+t.duration-1;return r==n?e.subject.localeCompare(t.subject):r>n?-1:1})),{lessons:t,totalWidth:o,ceil:o,floor:0}})),i=Array(11).fill(o),s=Object(S.a)(a);try{for(s.s();!(c=s.n()).done;){var l,d=c.value,j=Object(S.a)(d.lessons);try{for(j.s();!(l=j.n()).done;){for(var u=l.value,b=u.time_index,h=u.time_index+u.duration,O=(Math.max.apply(Math,Object(A.a)(r.slice(b,h))),o+1),p=b;p<h;++p)O=Math.min(O,Math.floor(i[p]/r[p]));u.width=O;for(var f=b;f<h;++f)r[f]--,i[f]-=O}}catch(x){j.e(x)}finally{j.f()}}}catch(x){s.e(x)}finally{s.f()}return a}var J=function(e){var t=e.dayTimetable,r=e.dayIdx,n=e.currentWeekInterval,c=I()();c.fontSize,c.ref;if(!t)return Object(o.jsx)("div",{});for(var a=function(e){var t=Object(A.a)(Array(11)).map((function(){return Array()}));return e.flat().map((function(e){for(var r=0;r<e.duration;r++)t[e.time_index+r].push(e)})),t}(t),i=q(t,a),s=i.length>0?i[0].totalWidth:1,l=Array(11),d=0;d<11;++d)l[d]={bottom:1,top:s+1};var j=!0;console.log(l);var u=i.map((function(e){var t,r=[],n=Object(S.a)(e.lessons);try{for(n.s();!(t=n.n()).done;){var c=t.value,i=l[c.time_index],d=void 0,u=void 0;j?(d=i.bottom,u=i.bottom+c.width):(u=i.top,d=i.top-c.width),console.log("fromBottom: ".concat(j," lesson:")),console.log(c),console.log("gridRowStart: ".concat(d,", gridRowEnd: ").concat(u)),r.push(Object(o.jsx)("div",{style:{backgroundColor:"".concat(c.color),gridRow:"".concat(d.toString()," / ").concat(u.toString()),gridColumn:"".concat((c.time_index+1).toString()," / ").concat((c.time_index+c.duration+1).toString())},children:Object(o.jsx)(P,{lesson:c,height:15*c.width/s+"vh",lessonsByHour:a})}));for(var b=c.time_index;b<c.time_index+c.duration;b++)j?l[b].bottom=u:l[b].top=d;console.log(l),j=!j}}catch(h){n.e(h)}finally{n.f()}return r}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:Object(C.a)(n[r],"iii",{locale:U.a})}),Object(o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(11, calc(90vw/11))",columnGap:"1px",gridTemplateRows:"repeat(".concat(s,", calc(15vh/").concat(s,"))")},children:u.flat()})]})},X=r(153),Q=function(e){var t=e.lessonIdx,r=e.startOfLesson,n=I()(),c=n.fontSize,a=n.ref;return Object(o.jsx)(f.a,{height:"5vh",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"elipsis",children:Object(o.jsxs)("div",{style:{fontSize:c},ref:a,children:[Object(o.jsx)("div",{children:t.toString()}),Object(o.jsx)("div",{children:Object(C.a)(r,"HH:mm")+"-"+Object(C.a)(Object(X.a)(r,45),"HH:mm")})]})})},Y=function(){var e=I()();e.fontSize,e.ref;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{}),Object(o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(11, calc(90vw/11))",columnGap:"1px"},children:["7:10","8:00","9:00","10:00","11:00","12:00","13:00","14:00","14:50","15:40","16:30"].map((function(e){var t=e.split(":");return(new Date).setHours(parseInt(t[0]),parseInt(t[1]))})).map((function(e,t){return Object(o.jsx)(Q,{lessonIdx:t,startOfLesson:e})}))})]})},Z={loadSchedule:w.request},K=Object(u.a)((function(e){return{timetableWrapper:{display:"grid",gridAutoFlow:"rows",gridTemplateColumns:"7vw 90vw",gridTemplateRows:"5vh repeat(5, 15vh)",rowGap:"1px",margin:e.spacing(2,1,2,1)}}})),V=Object(g.b)((function(e){return{schedule:e.schedule.schedule}}),Z)((function(e){var t=e.schedule,r=e.loadSchedule;console.log("Am I even here?");var n=Object(j.f)().classParam;console.log(n),Object(a.useEffect)((function(){r(n)}),[r,n]);var c=K(),i=new Date,s=Object(x.a)({start:Object(v.a)(i,{weekStartsOn:1}),end:Object(m.a)(i,{weekStartsOn:1})});return Object(o.jsxs)(f.a,{className:c.timetableWrapper,children:[Object(o.jsx)(Y,{}),Array.from(Array(5).keys()).map((function(e){return Object(o.jsx)(J,{dayTimetable:t[e],dayIdx:e,currentWeekInterval:s})}))]})}));function $(){return Object(o.jsx)(d.a,{basename:"/",children:Object(o.jsxs)(j.c,{children:[Object(o.jsx)(j.a,{path:"/about",children:Object(o.jsx)(te,{})}),Object(o.jsx)(j.a,{path:"/topics",children:Object(o.jsx)(re,{})}),Object(o.jsxs)(j.a,{path:"/schedule/:classParam",children:[Object(o.jsx)(p,{}),Object(o.jsx)(V,{})]}),Object(o.jsx)(j.a,{path:"/",children:Object(o.jsx)(ee,{})})]})})}function ee(){return Object(o.jsxs)("h2",{children:["Home basename",Object(o.jsx)(d.b,{to:"/schedule/2E",children:"Schedule"})]})}var te=function(){return Object(o.jsx)("h2",{children:"About"})};function re(){var e=Object(j.g)();return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Topics"}),Object(o.jsxs)("ul",{children:[Object(o.jsx)("li",{children:Object(o.jsx)(d.b,{to:"".concat(e.url,"/components"),children:"Components"})}),Object(o.jsx)("li",{children:Object(o.jsx)(d.b,{to:"".concat(e.url,"/props-v-state"),children:"Props v. State"})})]}),Object(o.jsxs)(j.c,{children:[Object(o.jsx)(j.a,{path:"".concat(e.path,"/:topicId"),children:Object(o.jsx)(ne,{})}),Object(o.jsx)(j.a,{path:e.path,children:Object(o.jsx)("h3",{children:"Please select a topic."})})]})]})}function ne(){var e=Object(j.f)().topicId;return Object(o.jsxs)("h3",{children:["Requested topic ID: ",e]})}var ce=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,169)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;r(e),n(e),c(e),o(e),a(e)}))},oe=r(29),ae=r(161),ie=Object(y.createReducer)({loading:!0,error:!1}).handleAction(w.request,(function(){return{loading:!0,error:!1}})).handleAction(w.failure,(function(){return{loading:!1,error:!0}})).handleAction(w.success,(function(e,t){return{loading:!1,error:!t.payload.success}})),se=Object(y.createReducer)([]).handleAction(w.success,(function(e,t){return t.payload.resp?t.payload.resp:[]})),le=Object(oe.combineReducers)({isLoadingSchedule:ie,schedule:se}),de=Object(oe.combineReducers)({schedule:le}),je=r(166),ue=r(81),be=r(98),he=r(157),Oe=r(158),pe=r(77),fe=r(159),xe=function(e,t,r){var n=r.api;return e.pipe(Object(he.a)(Object(y.isActionOf)(w.request)),Object(Oe.a)((function(e){return Object(ue.a)(n.schedule.getSchedule(e.payload)).pipe(Object(pe.a)(w.success),Object(fe.a)((function(e){return Object(be.a)(w.failure(e))})))})))},ve=je.a.apply(void 0,Object(A.a)(Object.values(n)));function me(e){return fetch("https://sabat.dev/api/tta?c=".concat(e,"&o=0")).then((function(e){return e.json()}))}var ge={api:{schedule:c}},ye=r(100),we=Object(ae.a)({dependencies:ge}),Se=[we],Ae=Object(ye.composeWithDevTools)(oe.applyMiddleware.apply(void 0,Se)),Ce=Object(oe.createStore)(de,Ae);we.run(ve);var ke=Ce,_e=r(101),Ee=r(160),Be=Object(_e.a)({overrides:{MuiCssBaseline:{"@global":{body:{"-webkit-text-size-adjust":"none","text-size-adjust":"none","-moz-text-size-adjust":"none","-ms-text-size-adjuist":"none"},"*":{"--scrollbarBG":"#CFD8DC","--thumbBG":"#90A4AE",scrollbarWidth:"thin",scrollbarColor:"var(--thumbBG) var(--scrollbarBG)"},"*::-webkit-scrollbar":{width:"11px"},"*::-webkit-scrollbar-track":{background:"var(--scrollbarBG)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"var(--thumbBG)",bordeRadius:"6px",border:"3px solid var(--scrollbarBG)"}}}}});l.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(g.a,{store:ke,children:Object(o.jsx)(Ee.a,{theme:Be,children:Object(o.jsx)($,{})})})}),document.getElementById("root")),ce()}},[[123,1,2]]]);
//# sourceMappingURL=main.7b7634c6.chunk.js.map