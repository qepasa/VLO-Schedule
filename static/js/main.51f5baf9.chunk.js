/*! For license information please see main.51f5baf9.chunk.js.LICENSE.txt */
(this["webpackJsonpvlo-schedule"]=this["webpackJsonpvlo-schedule"]||[]).push([[0],{141:function(e,t,r){},149:function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"loadScheduleEpic",(function(){return He}));var a={};r.r(a),r.d(a,"loadClassesEpic",(function(){return We}));var c={};r.r(c),r.d(c,"getSchedule",(function(){return Ue})),r.d(c,"getClasses",(function(){return qe}));var o=r(2),s=r(0),i=r.n(s),l=r(10),d=r.n(l),u=(r(141),r(175)),b=r(125),j=r(194),h=r(184),p=r(77),f=r(18),O=r(173),x=r(65),m=r(174),g=Object(O.a)((function(e){return{footer:{backgroundColor:e.palette.background.paper,flexShrink:0},footerText:{paddingRight:e.spacing(1),float:"right"}}})),v=function(){var e=g();return Object(o.jsx)("footer",{className:e.footer,children:Object(o.jsx)(x.a,{variant:"caption",align:"center",gutterBottom:!0,children:Object(o.jsxs)("div",{className:e.footerText,children:[Object(o.jsx)(m.a,{target:"_blank",href:"https://github.com/Cloud11665/sabat.dev/tree/master/api",color:"secondary",children:"API rozk\u0142adu zaj\u0119\u0107 "}),"stworzone przez",Object(o.jsx)(m.a,{target:"_blank",href:"https://github.com/Cloud11665",color:"secondary",children:"Cloud11665"}),", Frontend przez ",Object(o.jsx)(m.a,{target:"_blank",href:"https://github.com/qepasa",color:"secondary",children:"qepasa"})]})})})},y=r(63),S=r(97),C=r(176),k=r(200),A=r(177),w=r(178),_=r(204),E=r(183),z=r(206),L=r(108),T=r.n(L),R=r(59),D=r(120),B=r.n(D),I=r(121),N=r.n(I),F=Object(O.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:Object(S.a)({margin:e.spacing(1),flex:1},e.breakpoints.down("md"),{fontSize:"125%"}),sectionDesktop:Object(S.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(S.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})),M=Object(f.h)(Object(R.b)((function(e){return{availableClasses:e.classes.classes}}))((function(e){var t=e.availableClasses,r=e.history,n=(Object(u.a)("(min-width:900px)"),i.a.useState(null)),a=Object(y.a)(n,2),c=a[0],s=a[1],l=Boolean(c),d=function(e){s(e.currentTarget)},b=function(){s(null)},j=function(e){return function(){b(),r.push("".concat(e))}},h=F(),p=Object(f.g)().classParam;return Object(o.jsxs)(C.a,{className:h.toolbar,children:[Object(o.jsxs)(k.a,{alignSelf:"left",children:[Object(o.jsx)(A.a,{className:h.sectionDesktop,variant:"contained",color:"primary",onClick:d,endIcon:Object(o.jsx)(T.a,{}),children:"Wybierz klas\u0119"}),Object(o.jsx)(w.a,{onClick:d,color:"primary",className:h.sectionMobile,children:Object(o.jsx)(T.a,{})}),Object(o.jsx)(_.a,{id:"classes-menu",anchorEl:c,keepMounted:!0,open:l,onClose:b,PaperProps:{style:{maxHeight:"50vh"}},children:t.map((function(e){return Object(o.jsx)(E.a,{onClick:j(e),selected:e===p,children:e},e)}))})]}),Object(o.jsxs)(x.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:h.toolbarTitle,children:["Rozk\u0142ad klasy ",p]}),Object(o.jsxs)("div",{className:h.sectionDesktop,children:[Object(o.jsx)(z.a,{title:"Wy\u015blij do nas maila!","aria-label":"send-feedback-tooltip",arrow:!0,children:Object(o.jsx)(w.a,{"aria-label":"send-feedback",color:"inherit",component:"a",href:"mailto:feedback.vlorocks@gmail.com?subject=Zg%C5%82o%C5%9B%20B%C5%82%C4%85d",target:"_blank",children:Object(o.jsx)(B.a,{})})}),Object(o.jsx)(z.a,{title:"Kod. PogU","aria-label":"github-repo-tooltip",arrow:!0,children:Object(o.jsx)(w.a,{"aria-label":"github-repo",color:"inherit",component:"a",href:"https://github.com/qepasa/VLO-Schedule",target:"_blank",children:Object(o.jsx)(N.a,{})})})]})]})}))),H=r(191),W=r(192),G=r(193),U=r(22),q=Object(U.createAsyncAction)("LOAD_CLASSES_REQUEST","LOAD_CLASSES_SUCCESS","LOAD_CLASSES_FAILURE")(),P=Object(U.createAsyncAction)("LOAD_SCHEDULE_REQUEST","LOAD_SCHEDULE_SUCCESS","LOAD_SCHEDULE_FAILURE")(),J=r(98),Q=r(64),Z=r(199);function K(e,t){return t>e?K(t,e):0===t?e:K(t,e%t)}function V(e){if(0===e.length)throw Error("You need to pass at least one number!");if(1===e.length)return e[0];if(2===e.length)return e[0]*e[1]/K(e[0],e[1]);var t=e.pop(),r=V(e);return t*r/K(t,r)}var X=r(45),Y=r.n(X),$=r(205),ee=r(185),te=r(186),re=r(182),ne=r(153),ae=r(187),ce=r(188),oe=r(189),se=function(e){var t=e.lessons,r=e.lessonNumber,n=e.onClose,a=e.open,c=function(){n()};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(h.a,{}),Object(o.jsxs)($.a,{onClose:c,"aria-labelledby":"lessons-list-dialog",open:a,fullWidth:!0,children:[Object(o.jsxs)(ee.a,{id:"lessons-list-dialog-title",children:["Lekcja ",r]}),Object(o.jsx)(te.a,{children:Object(o.jsx)(re.a,{children:t.map((function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(ne.a,{children:Object(o.jsx)(ae.a,{primary:"".concat(e.subject).concat(e.group?" - "+e.group:""),secondary:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:["Nauczyciel: ",e.teacher]}),Object(o.jsxs)("div",{children:["Sala: ",e.classroom]})]})})},e.subject+e.teacher+e.color),Object(o.jsx)(ce.a,{variant:"inset",component:"li"})]})}))})}),Object(o.jsx)(oe.a,{children:Object(o.jsx)(A.a,{onClick:c,color:"primary",children:"Zamknij"})})]})]})},ie=Object(O.a)((function(e){return{lessonTile:{padding:e.spacing(.2)},textStyle:{}}})),le=function(e){var t,r=e.lesson,n=e.height,a=e.lessonsByHour,c=Y()(),i=c.fontSize,l=c.ref,d=Object(s.useState)(!1),u=Object(y.a)(d,2),b=u[0],j=u[1],h=Object(s.useState)([]),p=Object(y.a)(h,2),f=p[0],O=p[1],x=Object(s.useState)(0),m=Object(y.a)(x,2),g=m[0],v=m[1],S=ie(),C=("#"===(t=r.color).slice(0,1)&&(t=t.slice(1)),3===t.length&&(t=t.split("").map((function(e){return e+e})).join("")),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=70?"black":"white");return Object(o.jsxs)("div",{style:{fontSize:i,height:n,overflow:"hidden",display:"flex",flexDirection:"column"},ref:l,onClick:function(e){var t=e.currentTarget.getBoundingClientRect(),n=(e.pageX-t.left)/(t.right-t.left),c=1/r.duration,o=Math.floor(n/c);(e.target===l.current||e.target instanceof Node&&l.current.contains(e.target))&&(O(a[r.time_index+o]),v(r.time_index+o),j(!0))},className:S.lessonTile,children:[Object(o.jsx)("div",{style:{textAlign:"left",flex:"1 0 auto",color:C},className:S.textStyle,children:r.teacher}),Object(o.jsx)("div",{style:{textAlign:"center",flex:"1 0 auto",color:C},className:S.textStyle,children:r.subject}),Object(o.jsxs)("div",{style:{flexShrink:0,color:C},className:S.textStyle,children:[Object(o.jsx)("div",{style:{float:"left",textAlign:"left"},children:r.classroom}),Object(o.jsx)("div",{style:{float:"right",textAlign:"right"},children:r.group})]}),Object(o.jsx)(se,{lessons:f,lessonNumber:g,onClose:function(){j(!1)},open:b})]})},de=r(201);function ue(e,t){for(var r=Array(11).fill(0),n=0;n<11;++n)r[n]=t[n].length;var a,c=V(r.filter((function(e){return 0!=e}))),o=e.map((function(e){var t=e.map((function(e){return e}));return t.sort((function(e,t){var r=e.time_index+e.duration-1,n=t.time_index+t.duration-1;return r==n?e.subject.localeCompare(t.subject):r>n?-1:1})),{lessons:t,totalWidth:c,ceil:c,floor:0}})),s=Array(11).fill(c),i=Object(J.a)(o);try{for(i.s();!(a=i.n()).done;){var l,d=a.value,u=Object(J.a)(d.lessons);try{for(u.s();!(l=u.n()).done;){for(var b=l.value,j=b.time_index,h=b.time_index+b.duration,p=(Math.max.apply(Math,Object(Q.a)(r.slice(j,h))),c+1),f=j;f<h;++f)p=Math.min(p,Math.floor(s[f]/r[f]));b.width=p;for(var O=j;O<h;++O)r[O]--,s[O]-=p}}catch(x){u.e(x)}finally{u.f()}}}catch(x){i.e(x)}finally{i.f()}return o}var be=function(e){var t=e.dayTimetable,r=e.dayIdx,n=e.currentWeekInterval,a=Y()();a.fontSize,a.ref;if(!t)return Object(o.jsx)("div",{});for(var c=function(e){var t=Object(Q.a)(Array(11)).map((function(){return Array()}));return e.flat().map((function(e){for(var r=0;r<e.duration;r++)t[e.time_index+r].push(e)})),t}(t),s=ue(t,c),i=s.length>0?s[0].totalWidth:1,l=Array(11),d=0;d<11;++d)l[d]={bottom:1,top:i+1};var u=!0,b=s.map((function(e){var t,r=[],n=Object(J.a)(e.lessons);try{for(n.s();!(t=n.n()).done;){var a=t.value,s=l[a.time_index],d=void 0,b=void 0;u?(d=s.bottom,b=s.bottom+a.width):(b=s.top,d=s.top-a.width),r.push(Object(o.jsx)("div",{style:{backgroundColor:"".concat(a.color),gridRow:"".concat(d.toString()," / ").concat(b.toString()),gridColumn:"".concat((a.time_index+1).toString()," / ").concat((a.time_index+a.duration+1).toString())},children:Object(o.jsx)(le,{lesson:a,height:15*a.width/i+"vh",lessonsByHour:c})}));for(var j=a.time_index;j<a.time_index+a.duration;j++)u?l[j].bottom=b:l[j].top=d;u=!u}}catch(h){n.e(h)}finally{n.f()}return r}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:Object(Z.a)(n[r],"iii",{locale:de.a})}),Object(o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(11, calc(90vw/11))",columnGap:"1px",gridTemplateRows:"repeat(".concat(i,", calc(15vh/").concat(i,"))")},children:b.flat()})]})},je=r(190),he=function(e){var t=e.lessonIdx,r=e.startOfLesson,n=Y()(),a=n.fontSize,c=n.ref;return Object(o.jsx)(k.a,{height:"5vh",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"elipsis",children:Object(o.jsxs)("div",{style:{fontSize:a},ref:c,children:[Object(o.jsx)("div",{children:t.toString()}),Object(o.jsx)("div",{children:Object(Z.a)(r,"HH:mm")+"-"+Object(Z.a)(Object(je.a)(r,45),"HH:mm")})]})})},pe=function(){var e=Y()();e.fontSize,e.ref;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{}),Object(o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(11, calc(90vw/11))",columnGap:"1px"},children:["7:10","8:00","9:00","10:00","11:00","12:00","13:00","14:00","14:50","15:40","16:30"].map((function(e){var t=e.split(":");return(new Date).setHours(parseInt(t[0]),parseInt(t[1]))})).map((function(e,t){return Object(o.jsx)(he,{lessonIdx:t,startOfLesson:e})}))})]})},fe={loadSchedule:P.request,loadClasses:q.request},Oe=Object(O.a)((function(e){return{timetableWrapper:{display:"grid",gridAutoFlow:"rows",gridTemplateColumns:"7vw 90vw",gridTemplateRows:"5vh repeat(5, 15vh)",rowGap:"1px",margin:e.spacing(2,1,2,1)}}})),xe=Object(R.b)((function(e){return{schedule:e.schedule.schedule}}),fe)((function(e){var t=e.schedule,r=e.loadSchedule,n=e.loadClasses;console.log("Am I even here?");var a=Object(f.g)().classParam;console.log(a),Object(s.useEffect)((function(){n()}),[n]),Object(s.useEffect)((function(){r(a)}),[r,a]);var c=Oe(),i=new Date,l=Object(H.a)({start:Object(W.a)(i,{weekStartsOn:1}),end:Object(G.a)(i,{weekStartsOn:1})});return Object(o.jsxs)(k.a,{className:c.timetableWrapper,children:[Object(o.jsx)(pe,{}),Array.from(Array(5).keys()).map((function(e){return Object(o.jsx)(be,{dayTimetable:t[e],dayIdx:e,currentWeekInterval:l})}))]})}));function me(){var e=Object(u.a)("(prefers-color-scheme: dark)"),t=i.a.useMemo((function(){return Object(b.a)({palette:{type:e?"dark":"light"},overrides:{MuiCssBaseline:{"@global":{body:{"-webkit-text-size-adjust":"none","text-size-adjust":"none","-moz-text-size-adjust":"none","-ms-text-size-adjuist":"none"},"*":{"--scrollbarBG":"#CFD8DC","--thumbBG":"#90A4AE",scrollbarWidth:"thin",scrollbarColor:"var(--thumbBG) var(--scrollbarBG)"},"*::-webkit-scrollbar":{width:"11px"},"*::-webkit-scrollbar-track":{background:"var(--scrollbarBG)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"var(--thumbBG)",bordeRadius:"6px",border:"3px solid var(--scrollbarBG)"}}}}})}),[e]);return Object(o.jsxs)(j.a,{theme:t,children:[Object(o.jsx)(h.a,{}),Object(o.jsx)(p.a,{children:Object(o.jsxs)(f.d,{children:[Object(o.jsx)(f.b,{path:"/timetable/:classParam",children:Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Object(o.jsxs)("div",{style:{flex:"1 0 auto"},children:[Object(o.jsx)(M,{}),Object(o.jsx)(xe,{})]}),Object(o.jsx)(v,{})]})}),Object(o.jsx)(f.b,{path:"/",children:Object(o.jsx)(f.a,{to:"/timetable/1A"})})]})})]})}var ge=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,208)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),c(e),o(e)}))},ve=r(26),ye=r(198),Se=Object(U.createReducer)({loading:!0,error:!1}).handleAction(P.request,(function(){return{loading:!0,error:!1}})).handleAction(P.failure,(function(){return{loading:!1,error:!0}})).handleAction(P.success,(function(e,t){return{loading:!1,error:!t.payload.success}})),Ce=Object(U.createReducer)([]).handleAction(P.success,(function(e,t){return t.payload.resp?t.payload.resp:[]})),ke=Object(ve.combineReducers)({isLoadingSchedule:Se,schedule:Ce}),Ae=Object(U.createReducer)({loading:!0,error:!1}).handleAction(q.request,(function(){return{loading:!0,error:!1}})).handleAction(q.failure,(function(){return{loading:!1,error:!0}})).handleAction(q.success,(function(e,t){return{loading:!1,error:!t.payload.success}})),we=Object(U.createReducer)([]).handleAction(q.success,(function(e,t){return t.payload.resp?t.payload.resp:[]})),_e=Object(ve.combineReducers)({isLoadingClasses:Ae,classes:we}),Ee=Object(U.createAction)("SET_THEME")(),ze=Object(U.createReducer)("").handleAction(Ee,(function(e,t){return t.payload})),Le=Object(ve.combineReducers)({themeReducer:ze}),Te=Object(ve.combineReducers)({schedule:ke,classes:_e,preferences:Le}),Re=r(203),De=r(95),Be=r(122),Ie=r(195),Ne=r(196),Fe=r(92),Me=r(197),He=function(e,t,r){var n=r.api;return e.pipe(Object(Ie.a)(Object(U.isActionOf)(P.request)),Object(Ne.a)((function(e){return Object(De.a)(n.schedule.getSchedule(e.payload)).pipe(Object(Fe.a)(P.success),Object(Me.a)((function(e){return Object(Be.a)(P.failure(e))})))})))},We=function(e,t,r){var n=r.api;return e.pipe(Object(Ie.a)(Object(U.isActionOf)(q.request)),Object(Ne.a)((function(){return Object(De.a)(n.schedule.getClasses()).pipe(Object(Fe.a)(q.success),Object(Me.a)((function(e){return Object(Be.a)(q.failure(e))})))})))},Ge=Re.a.apply(void 0,Object(Q.a)(Object.values(n)).concat(Object(Q.a)(Object.values(a))));function Ue(e){return fetch("https://sabat.dev/api/tta?c=".concat(e,"&o=0")).then((function(e){return e.json()}))}function qe(){return fetch("https://sabat.dev/api/cla").then((function(e){return e.json()}))}var Pe={api:{schedule:c}},Je=r(124),Qe=Object(ye.a)({dependencies:Pe}),Ze=[Qe],Ke=Object(Je.composeWithDevTools)(ve.applyMiddleware.apply(void 0,Ze)),Ve=Object(ve.createStore)(Te,Ke);Qe.run(Ge);var Xe=Ve;d.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(R.a,{store:Xe,children:Object(o.jsx)(me,{})})}),document.getElementById("root")),ge()}},[[149,1,2]]]);
//# sourceMappingURL=main.51f5baf9.chunk.js.map