/*! For license information please see main.580ff97e.chunk.js.LICENSE.txt */
(this["webpackJsonpvlo-schedule"]=this["webpackJsonpvlo-schedule"]||[]).push([[0],{150:function(e,t,r){},160:function(e,t,r){"use strict";r.r(t);var a={};r.r(a),r.d(a,"loadScheduleEpic",(function(){return at}));var n={};r.r(n),r.d(n,"loadClassesEpic",(function(){return nt}));var c={};r.r(c),r.d(c,"getSchedule",(function(){return ot})),r.d(c,"getClasses",(function(){return it}));var o=r(2),i=r(0),s=r.n(i),l=r(10),d=r.n(l),u=(r(150),r(62)),j=r(131),b=r(205),h=r(195),p=r(46),O=r(81),f=r(19),x=r(183),m=r(66),g=r(185),v=Object(x.a)((function(e){return{footer:{backgroundColor:e.palette.background.paper,flexShrink:0},footerText:{paddingRight:e.spacing(1),float:"right"}}})),y=function(){var e=v();return Object(o.jsx)("footer",{className:e.footer,children:Object(o.jsx)(m.a,{variant:"caption",align:"center",gutterBottom:!0,children:Object(o.jsxs)("div",{className:e.footerText,children:[Object(o.jsx)(g.a,{target:"_blank",href:"https://github.com/Cloud11665/sabat.dev/tree/master/api",color:"secondary",children:"API rozk\u0142adu zaj\u0119\u0107 "}),"stworzone przez",Object(o.jsx)(g.a,{target:"_blank",href:"https://github.com/Cloud11665",color:"secondary",children:"Cloud11665"}),", Frontend przez ",Object(o.jsx)(g.a,{target:"_blank",href:"https://github.com/qepasa",color:"secondary",children:"qepasa"})]})})})},S=r(57),k=r(186),w=r(188),C=r(215),A=r(218),_=r(193),E=r(212),T=r(194),z=r(187),L=r(112),I=r.n(L),B=r(110),N=r.n(B),D=r(111),R=r.n(D),W=r(22),F=Object(W.createAction)("SET_THEME")(),M=r(122),H=r.n(M),U=r(123),q=r.n(U),G=r(87),P=r.n(G),Z=r(125),J=r.n(Z),K=function(e,t){return"light"===e?Object(o.jsx)(k.a,{"aria-label":"theme-button",color:"inherit",onClick:t,children:Object(o.jsx)(H.a,{})}):Object(o.jsx)(k.a,{"aria-label":"theme-button",color:"inherit",onClick:t,children:Object(o.jsx)(q.a,{})})},Q=function(e,t,r,a,n){return t.loading?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(z.a,{width:"3vw",className:n,animation:"wave"}),Object(o.jsx)(z.a,{width:"3vw",className:n,animation:"wave"}),Object(o.jsx)(z.a,{width:"3vw",className:n,animation:"wave"})]}):t.error?Object(o.jsxs)("div",{children:[Object(o.jsx)(P.a,{color:"error"}),Object(o.jsx)(m.a,{variant:"caption",color:"error",children:"Wyst\u0105pi\u0142 b\u0142\u0105d podczas \u0142adowania klas. Od\u015bwie\u017c stron\u0119."})]}):Object(o.jsx)("div",{children:e.map((function(e){return Object(o.jsx)(w.a,{onClick:r(e),selected:e===a,children:e},e)}))})},V=Object(x.a)((function(e){return{toolbar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbarTitle:Object(u.a)({margin:e.spacing(1),flex:1},e.breakpoints.down("md"),{fontSize:"125%"}),sectionDesktop:Object(u.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(u.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),skeletonStyle:{margin:e.spacing(1)}}})),X={setTheme:F},Y=Object(f.h)(Object(p.b)((function(e){return{availableClasses:e.classes.classes,classesStatus:e.classes.isLoadingClasses,preferences:e.preferences}}),X)((function(e){var t=e.availableClasses,r=e.classesStatus,a=e.preferences,n=e.setTheme,c=e.history,i=s.a.useState(null),l=Object(S.a)(i,2),d=l[0],u=l[1],j=s.a.useState(null),b=Object(S.a)(j,2),h=b[0],p=b[1],O=Boolean(d),x=Boolean(h),g=function(e){u(e.currentTarget)},v=function(){u(null)},y=function(){"dark"===a.theme?n("light"):n("dark")},z=V(),L=Object(f.g)().classParam,B="primary-search-account-menu-mobile",D=Object(o.jsxs)(C.a,{anchorEl:h,anchorOrigin:{vertical:"top",horizontal:"right"},id:B,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:x,onClose:function(){p(null)},children:[Object(o.jsx)(w.a,{children:K(a.theme,y)}),Object(o.jsx)(w.a,{children:Object(o.jsx)(A.a,{title:"Wy\u015blij do nas maila!","aria-label":"send-feedback-tooltip",arrow:!0,children:Object(o.jsx)(k.a,{"aria-label":"send-feedback",color:"inherit",component:"a",href:"mailto:feedback.vlorocks@gmail.com?subject=Zg%C5%82o%C5%9B%20B%C5%82%C4%85d",target:"_blank",children:Object(o.jsx)(N.a,{})})})}),Object(o.jsx)(w.a,{children:Object(o.jsx)(A.a,{title:"Kod. PogU","aria-label":"github-repo-tooltip",arrow:!0,children:Object(o.jsx)(k.a,{"aria-label":"github-repo",color:"inherit",component:"a",href:"https://github.com/qepasa/VLO-Schedule",target:"_blank",children:Object(o.jsx)(R.a,{})})})})]});return Object(o.jsxs)(_.a,{className:z.toolbar,children:[Object(o.jsxs)(E.a,{alignSelf:"left",children:[Object(o.jsx)(T.a,{className:z.sectionDesktop,variant:"contained",color:"primary",onClick:g,endIcon:Object(o.jsx)(I.a,{}),children:"Wybierz klas\u0119"}),Object(o.jsx)(k.a,{onClick:g,color:"primary",className:z.sectionMobile,children:Object(o.jsx)(I.a,{})}),Object(o.jsx)(C.a,{id:"classes-menu",anchorEl:d,keepMounted:!0,open:O,onClose:v,PaperProps:{style:{maxHeight:"70vh"}},children:Q(t,r,(function(e){return function(){v(),c.push("".concat(e))}}),L,z.skeletonStyle)})]}),Object(o.jsxs)(m.a,{component:"h2",variant:"h5",color:"inherit",align:"center",noWrap:!0,className:z.toolbarTitle,children:["Rozk\u0142ad klasy ",L]}),Object(o.jsxs)("div",{className:z.sectionDesktop,children:[K(a.theme,y),Object(o.jsx)(A.a,{title:"Wy\u015blij do nas maila!","aria-label":"send-feedback-tooltip",arrow:!0,children:Object(o.jsx)(k.a,{"aria-label":"send-feedback",color:"inherit",component:"a",href:"mailto:feedback.vlorocks@gmail.com?subject=Zg%C5%82o%C5%9B%20B%C5%82%C4%85d",target:"_blank",children:Object(o.jsx)(N.a,{})})}),Object(o.jsx)(A.a,{title:"Kod. PogU","aria-label":"github-repo-tooltip",arrow:!0,children:Object(o.jsx)(k.a,{"aria-label":"github-repo",color:"inherit",component:"a",href:"https://github.com/qepasa/VLO-Schedule",target:"_blank",children:Object(o.jsx)(R.a,{})})})]}),Object(o.jsxs)("div",{className:z.sectionMobile,children:[Object(o.jsx)(k.a,{"aria-label":"show more","aria-controls":B,"aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},color:"inherit",children:Object(o.jsx)(J.a,{})}),D]})]})}))),$=r(202),ee=r(203),te=r(204),re=Object(W.createAsyncAction)("LOAD_CLASSES_REQUEST","LOAD_CLASSES_SUCCESS","LOAD_CLASSES_FAILURE")(),ae=Object(W.createAsyncAction)("LOAD_SCHEDULE_REQUEST","LOAD_SCHEDULE_SUCCESS","LOAD_SCHEDULE_FAILURE")(),ne=r(104),ce=r(74),oe=r(211);function ie(e,t){return t>e?ie(t,e):0===t?e:ie(t,e%t)}function se(e){if(0===e.length)throw Error("You need to pass at least one number!");if(1===e.length)return e[0];if(2===e.length)return e[0]*e[1]/ie(e[0],e[1]);var t=e.pop(),r=se(e);return t*r/ie(t,r)}var le=r(89),de=r.n(le),ue=r(216),je=r(196),be=r(197),he=r(192),pe=r(163),Oe=r(198),fe=r(199),xe=r(200),me=r(213);function ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.language;return e.charAt(0).toLocaleUpperCase(t)+e.slice(1)}var ve=function(e){var t=e.lessons,r=e.lessonNumber,a=e.dayIndex,n=e.onClose,c=e.open,i=e.currentWeekInterval;if(!t)return Object(o.jsx)("div",{});var s=function(){n()};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(h.a,{}),Object(o.jsxs)(ue.a,{onClose:s,"aria-labelledby":"lessons-list-dialog",open:c,fullWidth:!0,children:[Object(o.jsxs)(je.a,{id:"lessons-list-dialog-title",children:[ge(Object(oe.a)(i[a],"cccc",{locale:me.a}))," - lekcja ",r]}),Object(o.jsx)(be.a,{children:Object(o.jsx)(he.a,{children:t.map((function(e){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(pe.a,{children:Object(o.jsx)(Oe.a,{primary:"".concat(e.subject).concat(e.group?" - "+e.group:""),secondary:Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{children:["Nauczyciel: ",e.teacher]}),Object(o.jsxs)("div",{children:["Sala: ",e.classroom]})]})})},e.subject+e.teacher+e.color),Object(o.jsx)(fe.a,{variant:"inset",component:"li"})]})}))})}),Object(o.jsx)(xe.a,{children:Object(o.jsx)(T.a,{onClick:s,color:"secondary",children:"Zamknij"})})]})]})},ye=Object(x.a)((function(e){return{lessonTile:{padding:e.spacing(.2)},textStyle:{}}})),Se=function(e){var t,r=e.lesson,a=e.height,n=e.lessonsByHour,c=e.currentWeekInterval,s=de()({logLevel:"none"}),l=s.fontSize,d=s.ref,u=Object(i.useState)(!1),j=Object(S.a)(u,2),b=j[0],h=j[1],p=Object(i.useState)([]),O=Object(S.a)(p,2),f=O[0],x=O[1],m=Object(i.useState)(0),g=Object(S.a)(m,2),v=g[0],y=g[1],k=ye(),w=("#"===(t=r.color).slice(0,1)&&(t=t.slice(1)),3===t.length&&(t=t.split("").map((function(e){return e+e})).join("")),(299*parseInt(t.substr(0,2),16)+587*parseInt(t.substr(2,2),16)+114*parseInt(t.substr(4,2),16))/1e3>=70?"black":"white");return Object(o.jsxs)("div",{style:{fontSize:l,height:a,overflow:"hidden",display:"flex",flexDirection:"column"},ref:d,onClick:function(e){var t=e.currentTarget.getBoundingClientRect(),a=(e.pageX-t.left)/(t.right-t.left),c=1/r.duration,o=Math.floor(a/c);(e.target===d.current||e.target instanceof Node&&d.current.contains(e.target))&&(x(n[r.time_index+o]),y(r.time_index+o),h(!0))},className:k.lessonTile,children:[Object(o.jsx)("div",{style:{textAlign:"left",flex:"1 0 auto",color:w},className:k.textStyle,children:r.teacher}),Object(o.jsx)("div",{style:{textAlign:"center",flex:"1 0 auto",color:w},className:k.textStyle,children:r.subject}),Object(o.jsxs)("div",{style:{flexShrink:0,color:w},className:k.textStyle,children:[Object(o.jsx)("div",{style:{float:"left",textAlign:"left"},children:r.classroom}),Object(o.jsx)("div",{style:{float:"right",textAlign:"right"},children:r.group})]}),Object(o.jsx)(ve,{lessons:f,lessonNumber:v,dayIndex:r.day_index,onClose:function(){h(!1)},open:b,currentWeekInterval:c})]})};function ke(e,t){for(var r=Array(11).fill(0),a=0;a<11;++a)r[a]=t[a].length;var n,c=se(r.filter((function(e){return 0!==e}))),o=e.map((function(e){var t=e.map((function(e){return e}));return t.sort((function(e,t){var r=e.time_index+e.duration-1,a=t.time_index+t.duration-1;return r===a?e.subject.localeCompare(t.subject):r>a?-1:1})),{lessons:t,totalWidth:c,ceil:c,floor:0}})),i=Array(11).fill(c),s=Object(ne.a)(o);try{for(s.s();!(n=s.n()).done;){var l,d=n.value,u=Object(ne.a)(d.lessons);try{for(u.s();!(l=u.n()).done;){for(var j=l.value,b=j.time_index,h=j.time_index+j.duration,p=c+1,O=b;O<h;++O)p=Math.min(p,Math.floor(i[O]/r[O]));j.width=p;for(var f=b;f<h;++f)r[f]--,i[f]-=p}}catch(x){u.e(x)}finally{u.f()}}}catch(x){s.e(x)}finally{s.f()}return o}var we=function(e){var t=e.dayTimetable,r=e.dayIdx,a=e.currentWeekInterval;if(!t)return Object(o.jsx)("div",{});for(var n=function(e){var t=Object(ce.a)(Array(11)).map((function(){return Array()}));return e.flat().map((function(e){for(var r=0;r<e.duration;r++)t[e.time_index+r].push(e)})),t}(t),c=ke(t,n),i=c.length>0?c[0].totalWidth:1,s=Array(11),l=0;l<11;++l)s[l]={bottom:1,top:i+1};var d=!0,u=c.map((function(e){var t,r=[],c=Object(ne.a)(e.lessons);try{for(c.s();!(t=c.n()).done;){var l=t.value,u=s[l.time_index],j=void 0,b=void 0;d?(j=u.bottom,b=u.bottom+l.width):(b=u.top,j=u.top-l.width);var h=l.day_index.toString()+l.time_index.toString()+l.classroom.toString()+l.subject+l.teacher+l.group;r.push(Object(o.jsx)("div",{style:{backgroundColor:"".concat(l.color),gridRow:"".concat(j.toString()," / ").concat(b.toString()),gridColumn:"".concat((l.time_index+1).toString()," / ").concat((l.time_index+l.duration+1).toString())},children:Object(o.jsx)(Se,{lesson:l,height:15*l.width/i+"vh",lessonsByHour:n,currentWeekInterval:a})},h));for(var p=l.time_index;p<l.time_index+l.duration;p++)d?s[p].bottom=b:s[p].top=j;d=!d}}catch(O){c.e(O)}finally{c.f()}return r}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:Object(oe.a)(a[r],"iii",{locale:me.a})}),Object(o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(11, calc(90vw/11))",columnGap:"1px",gridTemplateRows:"repeat(".concat(i,", calc(15vh/").concat(i,"))")},children:u.flat()})]})},Ce=r(201),Ae=function(e){var t=e.lessonIdx,r=e.startOfLesson,a=de()(),n=a.fontSize,c=a.ref;return Object(o.jsx)(E.a,{height:"5vh",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"elipsis",children:Object(o.jsxs)("div",{style:{fontSize:n},ref:c,children:[Object(o.jsx)("div",{children:t.toString()}),Object(o.jsx)("div",{children:Object(oe.a)(r,"HH:mm")+"-"+Object(oe.a)(Object(Ce.a)(r,45),"HH:mm")})]})})},_e=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{}),Object(o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(11, calc(90vw/11))",columnGap:"1px"},children:["7:10","8:00","9:00","10:00","11:00","12:00","13:00","14:00","14:50","15:40","16:30"].map((function(e){var t=e.split(":");return(new Date).setHours(parseInt(t[0]),parseInt(t[1]))})).map((function(e,t){return Object(o.jsx)(Ae,{lessonIdx:t,startOfLesson:e},e.toString()+t.toString())}))})]})},Ee={loadSchedule:ae.request,loadClasses:re.request},Te=Object(x.a)((function(e){return{timetableWrapper:{display:"grid",gridAutoFlow:"rows",gridTemplateColumns:"7vw 90vw",gridTemplateRows:"5vh repeat(5, 15vh)",rowGap:"1px",margin:e.spacing(2,1,2,1)},skeletonStyle:{transform:"unset",gridRow:"2 / 7",gridColumn:"1 / 3"}}})),ze=Object(p.b)((function(e){return{scheduleStatus:e.schedule.isLoadingSchedule,schedule:e.schedule.schedule}}),Ee)((function(e){var t=e.scheduleStatus,r=e.schedule,a=e.loadSchedule,n=e.loadClasses,c=Object(f.g)().classParam;Object(i.useEffect)((function(){n()}),[n]),Object(i.useEffect)((function(){a(c)}),[a,c]);var s=Te(),l=new Date,d=Object($.a)({start:Object(ee.a)(l,{weekStartsOn:1}),end:Object(te.a)(l,{weekStartsOn:1})});return Object(o.jsxs)(E.a,{className:s.timetableWrapper,children:[Object(o.jsx)(_e,{}),t.loading?Object(o.jsx)(z.a,{className:s.skeletonStyle,animation:"wave"}):t.error?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(P.a,{color:"error"}),Object(o.jsx)(m.a,{variant:"h6",color:"error",children:"Wyst\u0105pi\u0142 b\u0142\u0105d podczas \u0142adowania rozk\u0142adu. Od\u015bwie\u017c stron\u0119."})]}):Array.from(Array(5).keys()).map((function(e){return Object(o.jsx)(we,{dayTimetable:r[e],dayIdx:e,currentWeekInterval:d},e.toString())}))]})})),Le={setTheme:F},Ie=Object(p.b)((function(e){return{preferences:e.preferences}}),Le)((function(e){var t=e.preferences,r=e.setTheme,a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";console.log(a),""===t.theme&&r(a);var n=""===t.theme?a:t.theme,c=s.a.useMemo((function(){return Object(j.a)({palette:{type:n},overrides:{MuiCssBaseline:{"@global":{body:{"-webkit-text-size-adjust":"none","text-size-adjust":"none","-moz-text-size-adjust":"none","-ms-text-size-adjuist":"none"},"*":{"--scrollbarBG":"#CFD8DC","--thumbBG":"#90A4AE",scrollbarWidth:"thin",scrollbarColor:"var(--thumbBG) var(--scrollbarBG)"},"*::-webkit-scrollbar":{width:"11px"},"*::-webkit-scrollbar-track":{background:"var(--scrollbarBG)"},"*::-webkit-scrollbar-thumb":{backgroundColor:"var(--thumbBG)",bordeRadius:"6px",border:"3px solid var(--scrollbarBG)"}}}}})}),[n]);return c.typography.caption=Object(u.a)({},c.breakpoints.down("sm"),{fontSize:"60%"}),Object(o.jsxs)(b.a,{theme:c,children:[Object(o.jsx)(h.a,{}),Object(o.jsx)(O.a,{children:Object(o.jsxs)(f.d,{children:[Object(o.jsx)(f.b,{path:"/timetable/:classParam",children:Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[Object(o.jsxs)("div",{style:{flex:"1 0 auto"},children:[Object(o.jsx)(Y,{}),Object(o.jsx)(ze,{})]}),Object(o.jsx)(y,{})]})}),Object(o.jsx)(f.b,{path:"/",children:Object(o.jsx)(f.a,{to:"/timetable/1A"})})]})})]})})),Be=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,220)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;r(e),a(e),n(e),c(e),o(e)}))},Ne=r(24),De=r(210),Re=Object(W.createReducer)({loading:!0,error:!1}).handleAction(ae.request,(function(){return{loading:!0,error:!1}})).handleAction(ae.failure,(function(){return{loading:!1,error:!0}})).handleAction(ae.success,(function(e,t){return{loading:!1,error:!t.payload.success}})),We=Object(W.createReducer)([]).handleAction(ae.success,(function(e,t){return t.payload.resp?t.payload.resp:[]})),Fe=Object(Ne.combineReducers)({isLoadingSchedule:Re,schedule:We}),Me=Object(W.createReducer)({loading:!0,error:!1}).handleAction(re.request,(function(){return{loading:!0,error:!1}})).handleAction(re.failure,(function(){return{loading:!1,error:!0}})).handleAction(re.success,(function(e,t){return{loading:!1,error:!t.payload.success}})),He=Object(W.createReducer)([]).handleAction(re.success,(function(e,t){return t.payload.resp?t.payload.resp:[]})),Ue=Object(Ne.combineReducers)({isLoadingClasses:Me,classes:He}),qe=Object(W.createReducer)("").handleAction(F,(function(e,t){return t.payload})),Ge=Object(Ne.combineReducers)({theme:qe}),Pe=r(126),Ze=r.n(Pe),Je=r(101),Ke={key:"root",storage:Ze.a,whitelist:["preferences"]},Qe=Object(Je.a)(Ke,{schedule:Fe,classes:Ue,preferences:Ge}),Ve=r(217),Xe=r(102),Ye=r(127),$e=r(206),et=r(207),tt=r(98),rt=r(208),at=function(e,t,r){var a=r.api;return e.pipe(Object($e.a)(Object(W.isActionOf)(ae.request)),Object(et.a)((function(e){return Object(Xe.a)(a.schedule.getSchedule(e.payload)).pipe(Object(tt.a)(ae.success),Object(rt.a)((function(e){return Object(Ye.a)(ae.failure(e))})))})))},nt=function(e,t,r){var a=r.api;return e.pipe(Object($e.a)(Object(W.isActionOf)(re.request)),Object(et.a)((function(){return Object(Xe.a)(a.schedule.getClasses()).pipe(Object(tt.a)(re.success),Object(rt.a)((function(e){return Object(Ye.a)(re.failure(e))})))})))},ct=Ve.a.apply(void 0,Object(ce.a)(Object.values(a)).concat(Object(ce.a)(Object.values(n))));function ot(e){return fetch("https://sabat.dev/api/tta?c=".concat(e,"&o=0")).then((function(e){return e.json()}))}function it(){return fetch("https://sabat.dev/api/cla").then((function(e){return e.json()}))}var st={api:{schedule:c}},lt=r(129),dt=Object(De.a)({dependencies:st}),ut=[dt],jt=Object(lt.composeWithDevTools)(Ne.applyMiddleware.apply(void 0,ut)),bt=Object(Ne.createStore)(Qe,jt);dt.run(ct);var ht=bt,pt=r(130),Ot=r(209),ft=Object(Je.b)(ht);d.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(p.a,{store:ht,children:Object(o.jsx)(pt.a,{loading:Object(o.jsx)(Ot.a,{}),persistor:ft,children:Object(o.jsx)(Ie,{})})})}),document.getElementById("root")),Be()}},[[160,1,2]]]);
//# sourceMappingURL=main.580ff97e.chunk.js.map